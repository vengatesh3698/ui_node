"use strict";(self["webpackChunkgn_ui"]=self["webpackChunkgn_ui"]||[]).push([[943],{1642:function(e,t,s){s.d(t,{y:function(){return l}});var a=s(8987),i=s(1076),l=e=>i.Z.post(a.h+"search",e).then((e=>{var t=1;return e.data.rows.map(((e,s)=>(e.id=t++,e))),e.data}))},8943:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var a=s(3396),i=s(7139),l=s(9242),r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAXCAYAAADk3wSdAAAABHNCSVQICAgIfAhkiAAAAaZJREFUOE/FVcFVg0AQzXLgajowVqBWYOwgHSQ5AodIBWIFkANwJR3ECoIdpAOxAz3CAfyfBzxCNsuqB/e9fcvuzPyZ2fmziIlihGG4gngjhLijWlVVR3wHtm3vVHZCJvR9f2qa5qEFG+oQvCiKR9d1P2X2UtAoilIoP6iiIbDjOPdaoHEcz2FwUAG2MuitAZwMdc8iRZRUWmqCvgJ0oQM6mnoP5A1Fm/8PKGgUoOobzfS3SP9pNFIUaoYCvOuAwvmNZVnZKCgVUCx690co9YIoPS1KtUrsJnYP9lcDwy/sPRSIMumQkr/VbDqLlJlhTuEkw9zLUu6jn4CS+GVZLmFImrDP3SEA7xw6z5AvIE8xt9AhDbtRgzYR+VBYSfJJUbiM55AzYjocjn2e5+v2LahBUZgjllvpBWke9h8ZgYJ4iIDp/HkAuOatQJR8voYV/rUDsEIQdJSTuh4Qac3d9k4TGGq9TAoHO0RZF7qj1E+ePAlwB3gCyo2iiy4FKO2us45qOMt7Zptey9Bwdx84T/CfCmT/KWWbsntgzA7iOjEMI8OSjbXpN4mExBhcNVBOAAAAAElFTkSuQmCC";const o={class:"mt-3"},n=(0,a._)("div",{class:"pageHeader"},"Credit",-1),u=(0,a._)("div",{class:"pageDesc"},"List of all Credits",-1),d=(0,a._)("br",null,null,-1),c={class:"headerContainer"},h=(0,a._)("i",{class:"fas fa-plus",style:{"margin-right":"10px"}},null,-1),p={key:0},m=["onClick"],g=(0,a._)("h2",null,"User Details",-1),_=(0,a._)("br",null,null,-1),A={class:"ml-3 mr-3"},w=(0,a._)("span",{class:"flex xs5"},[(0,a._)("b",null,"Name")],-1),v={align:"right"},f=(0,a._)("br",null,null,-1),b=(0,a._)("span",{class:"flex xs5"},[(0,a._)("b",null,"Mac")],-1),C={align:"right"},k=(0,a._)("br",null,null,-1),y=(0,a._)("span",{class:"flex xs5"},[(0,a._)("b",null,"Expiry")],-1),U={align:"right"},D={class:"row container mt-3 mb-2"},V={class:"pageInput"},x=(0,a._)("span",{class:"mt-1 pl-2 pr-2"},"Go to the page",-1),E={class:"row"},S={class:"cardTitle"},z={class:"formView"},F=(0,a._)("span",{class:"va-form-label va-form-required-label"},"Type",-1),I={class:"md6 pr-3"},R=(0,a._)("br",null,null,-1),T=(0,a._)("span",{class:"va-form-label va-form-required-label"},"Amount",-1),L=(0,a._)("br",null,null,-1),M=(0,a._)("br",null,null,-1),P={key:0},O=(0,a._)("span",{class:"va-form-label va-form-required-label"},"User",-1),W=(0,a._)("br",null,null,-1),B=(0,a._)("br",null,null,-1),q=(0,a._)("br",null,null,-1);function N(e,t,s,N,Z,j){const $=(0,a.up)("va-input"),J=(0,a.up)("va-button"),G=(0,a.up)("va-data-table"),Y=(0,a.up)("va-modal"),Q=(0,a.up)("va-pagination"),H=(0,a.up)("va-icon"),K=(0,a.up)("va-radio"),X=(0,a.up)("va-select"),ee=(0,a.up)("VueSidePanel");return(0,a.wg)(),(0,a.iD)("div",o,[n,u,d,(0,a._)("div",c,[(0,a._)("div",null,[(0,a.Wm)($,{class:"flex md12 pr-3",modelValue:Z.search_term,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.search_term=e),modelModifiers:{trim:!0},type:"text",placeholder:"Search Credit"},null,8,["modelValue"])]),(0,a._)("div",null,["RESELLER"!=Z.role?((0,a.wg)(),(0,a.j4)(J,{key:0,class:"ml-3 createBtn",color:"#999999",onClick:t[1]||(t[1]=e=>j.pageModification("create",null))},{default:(0,a.w5)((()=>[h,(0,a.Uk)(" Add ")])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("div",null,[(0,a.Wm)(G,{class:"dataTable mt-4",items:j.contentList,columns:j.columnList,"wrapper-size":"1000","item-size":"46","virtual-scroller":""},{"cell(userspopup)":(0,a.w5)((({row:e})=>[e.rowData.is_subscribed?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("img",{src:r,onClick:t=>j.userspopup(e.rowData),style:{width:"15px",height:"15px","margin-top":"2px",cursor:"pointer"}},null,8,m)])):(0,a.kq)("",!0)])),_:1},8,["items","columns"]),(0,a.Wm)(Y,{modelValue:Z.isUsershow,"onUpdate:modelValue":t[2]||(t[2]=e=>Z.isUsershow=e),size:"large",noEscDismiss:"",noOutsideDismiss:"",cancelText:"",class:"mr-4 my-1"},{header:(0,a.w5)((()=>[g])),default:(0,a.w5)((()=>[_,(0,a._)("div",A,[w,(0,a._)("span",v,": "+(0,i.zw)(e.userData.subscriber_name),1),(0,a.Uk)(),f,b,(0,a._)("span",C,": "+(0,i.zw)(e.userData.mac),1),k,y,(0,a._)("span",U,": "+(0,i.zw)(new Date(e.userData.expiry_date).toLocaleString().split(",")[0]),1)])])),_:1},8,["modelValue"]),(0,a.Wm)(Y,{style:{color:"#ffffff"},modelValue:Z.showModal,"onUpdate:modelValue":t[3]||(t[3]=e=>Z.showModal=e),title:"Delete Credit",message:"Are you sure to delete this Credit?",okText:"DELETE",cancelText:"Cancel",onOk:t[4]||(t[4]=t=>e.deleteZee(Z.deleteData)),blur:""},null,8,["modelValue"])]),(0,a._)("div",D,[(0,a._)("div",V,[x,(0,a.wy)((0,a._)("input",{ref:"directPageInput","onUpdate:modelValue":t[5]||(t[5]=e=>Z.direct_page=e),onInput:t[6]||(t[6]=e=>j.directPage(10,Z.direct_page))},null,544),[[l.nr,Z.direct_page,void 0,{trim:!0}]])]),(0,a.Wm)(Q,{class:"",modelValue:Z.page_value,"onUpdate:modelValue":t[7]||(t[7]=e=>Z.page_value=e),"visible-pages":7,total:Z.totalCount,"direction-links":!1,"page-size":10,"boundary-numbers":"",color:"#888888",size:"small",onClick:t[8]||(t[8]=e=>j.getAllCredit(10,Z.page_value))},null,8,["modelValue","total"])]),(0,a._)("div",null,[(0,a.Wm)(ee,{modelValue:Z.showForm,"onUpdate:modelValue":t[14]||(t[14]=e=>Z.showForm=e),width:"500px","hide-close-btn":"","panel-duration":1e3,"transition-name":"slide-right","no-close":""},{default:(0,a.w5)((()=>[(0,a._)("div",E,[(0,a._)("span",S,(0,i.zw)(e.title),1),(0,a.Wm)(H,{name:"close",class:"closeBar",size:"small",onClick:t[9]||(t[9]=e=>j.resetForm())})]),(0,a._)("form",z,[F,(0,a._)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Z.typeArr,(e=>((0,a.wg)(),(0,a.j4)(K,{class:"mt-3",modelValue:Z.type,"onUpdate:modelValue":t[10]||(t[10]=e=>Z.type=e),option:e},null,8,["modelValue","option"])))),256))]),R,T,(0,a.Wm)($,{class:"mt-2",modelValue:Z.amount,"onUpdate:modelValue":t[11]||(t[11]=e=>Z.amount=e),modelModifiers:{trim:!0},maxlength:"10",oninput:"event.target.value = event.target.value.replace(/[^0-9]*/g,'');",type:"text",placeholder:"Enter Amount",error:Z.checkAmount},null,8,["modelValue","error"]),L,M,"Credit"!=Z.type?((0,a.wg)(),(0,a.iD)("div",P,[O,W,(0,a.Wm)(X,{modelValue:Z.to_user,"onUpdate:modelValue":t[12]||(t[12]=e=>Z.to_user=e),class:"mt-2","text-by":"username",clearable:"","clearable-icon":"cancel",options:Z.userlist,searchable:"",placeholder:"Select User",error:Z.usercheck,"track-by":"username"},null,8,["modelValue","options","error"]),B,q])):(0,a.kq)("",!0),(0,a.Wm)(J,{class:"mt-5 form_button",onClick:t[13]||(t[13]=e=>j.submit(Z.flag)),color:"#ffffff"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(Z.flag),1)])),_:1})])])),_:1},8,["modelValue"])])])}var Z=s(8987),j=s(1642),$={created(){"SUPER_ADMIN"==this.$cookies.get("role")?(this.typeArr=["Credit","Debit","Reverse Credit"],this.type="Credit"):"ADMIN"==this.$cookies.get("role")&&(this.typeArr=["Debit","Reverse Credit"],this.type="Debit"),this.getAllCredit(10,0),this.getAllUser()},data(){return{type:"",flag:"",page_value:1,genres_id:"",totalCount:"",deleteData:"",search_term:"",direct_page:"",credit_id:"",showGrid:!0,isCreate:!1,showForm:!1,isUpdate:!1,showModal:!1,usercheck:!1,checkAmount:!1,checkType:!1,timestamp:(new Date).getTime(),role:this.$cookies.get("role"),userlist:[],typeArr:[],to_user:"",amount:"",creditList:[],isUsershow:!1}},computed:{columnList(){return[{key:"id",label:"S.No"},{key:"username",label:"username"},{key:"amount",label:"amount"},{key:"balance",label:"balance"},{key:"type",label:"Type"},{key:"to_user_name",label:"Debited From/To"},{key:"createdAt",label:"TimeStamp"},{key:"userspopup",label:"User",width:10}]},contentList(){return this.creditList}},watch:{search_term(){if(""==this.search_term)this.getAllCredit(10,0),this.page_value=1;else{var e=["0","1","2","3","4","5","6","7","8","9"],t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];if(e.some((e=>this.search_term.includes(e)))&&!t.some((e=>this.search_term.includes(e))))var s=["lcn"];else s=["username","type","amount","to_user_name"];var a=1,i={arr:s,term:this.search_term,type:"credit"};(0,j.y)(i).then((e=>{this.creditList=e.rows.map((e=>(e.id=a++,e)))}))}}},methods:{directPage(e,t){this.direct_page=t.replace(/\D/g,""),this.page_value=1==t||""==t?1:Math.max(10*t-9,1),this.page_value<=this.totalCount&&this.getAllCredit(e,this.page_value)},getAllCredit(e,t){var s=0==t?t+1:t;const a=this.$loading.show({width:40,height:40});this.axios.get(Z.h+"credit/"+e+"/"+t).then((e=>{a.hide(),this.totalCount=e.data.count,this.timestamp=(new Date).getTime(),this.creditList=e.data.rows.map((function(e,t){return e.id=s++,e.createdAt=new Date(e.createdAt).toLocaleString(),e}))}))},getAllUser(){const e=this.$loading.show({width:40,height:40});this.axios.get(Z.h+"user").then((t=>{e.hide(),this.userlist=t.data.map((function(e,t){return e.id=t++,e}))}))},pageModification(e,t){this.search_term="",this.title="create"==e?"Create Credit":"Update Credit",this.showForm=!0,"update"==e?(this.flag="Update",this.isUpdate=!0,this.isCreate=!1,this.type=t["type"],this.credit_id=t["credit_id"],this.name=t["name"]):(this.flag="Create",this.isUpdate=!1,this.isCreate=!0)},resetForm(){this.flag="",this.amount="",this.priority="",this.showForm=!1,this.checkType=!1,this.usercheck=!1,this.checkAmount=!1,this.getAllCredit(10,0),this.to_user="",this.totalCount="",this.page_value=this.page_value?this.page_value:1,"SUPER_ADMIN"==this.$cookies.get("role")?(this.typeArr=["Credit","Debit","Reverse Credit"],this.type="Credit"):"ADMIN"==this.$cookies.get("role")&&(this.typeArr=["Debit","Reverse Credit"],this.type="Debit")},errorCheck(){return!this.checkAmount},submit(e){if(this.checkAmount=!this.amount,this.usercheck=!this.to_user&&"Credit"!=this.type,!this.errorCheck())return;if(this.usercheck)return;var t=new FormData;let s;t.append("amount",this.amount),t.append("type",this.type),t.append("user_id",this.$cookies.get("user_id")),t.append("username",this.$cookies.get("username")),t.append("from_user_id",this.$cookies.get("user_id")),t.append("from_user_name",this.$cookies.get("username")),"Credit"!=this.type&&this.to_user&&"object"===typeof this.to_user&&(t.append("to_user_id",this.to_user.user_id),t.append("to_user_name",this.to_user.username)),"Update"==e?(t["credit_id"]=this.credit_id,s=this.axios.put(Z.h+"credit/"+this.credit_id,t)):"Create"==e&&(s=this.axios.post(Z.h+"credit/",t));const a=this.$loading.show({width:40,height:40});s.then((e=>{a.hide(),this.resetForm(),this.$toast.success(e.data)}),(e=>{a.hide(),this.showForm=!0,this.$toast.error(e.response.data)}))},userspopup(e){this.isUsershow=!0,this.userData=e}}},J=s(89);const G=(0,J.Z)($,[["render",N]]);var Y=G},8987:function(e){e.exports=JSON.parse('{"h":"http://103.232.245.38/gnapi/"}')}}]);
//# sourceMappingURL=943.19ee668f.js.map