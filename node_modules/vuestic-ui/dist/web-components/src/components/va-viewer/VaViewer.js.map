{"version":3,"file":"VaViewer.js","sources":["../../../../../src/components/va-viewer/VaViewer.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-viewer\"\n    v-bind=\"$attrs\"\n    @click=\"handleAnchorClick\"\n  >\n    <slot\n      name=\"anchor\"\n      v-bind=\"{ openViewer }\"\n    />\n\n    <slot v-if=\"!$slots.anchor\" />\n  </div>\n\n  <teleport\n    v-if=\"isOpened\"\n    :to=\"teleportTarget\"\n  >\n    <div class=\"va-viewer-content\">\n      <div\n        ref=\"content\"\n        class=\"va-viewer-content__main-area\"\n      >\n        <slot v-if=\"!$slots.image\" />\n        <slot name=\"image\" />\n      </div>\n\n      <div\n        ref=\"controls\"\n        class=\"va-viewer-content__controls-panel\"\n      >\n        <slot name=\"controls\" />\n\n        <slot\n          name=\"close\"\n          v-bind=\"{ close: closeViewer }\"\n        >\n          <button\n            class=\"va-viewer-content__close-button\"\n            @click=\"closeViewer\"\n          >\n            <va-icon\n              name=\"close\"\n              color=\"backgroundPrimary\"\n            />\n          </button>\n        </slot>\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed } from 'vue'\n\nimport { VaIcon } from '../va-icon'\n\nimport { useIsMounted, useDocument, useClickOutside } from '../../composables'\n\nexport default defineComponent({\n  name: 'VaViewer',\n\n  inheritAttrs: false,\n\n  components: { VaIcon },\n\n  setup (_, { slots }) {\n    const content = ref<HTMLElement>()\n    const controls = ref<HTMLElement>()\n\n    const isMounted = useIsMounted()\n    const isClosed = ref(true)\n    const isOpened = computed(() => isMounted.value && !isClosed.value)\n\n    const openViewer = () => (isClosed.value = false)\n    const closeViewer = () => (isClosed.value = true)\n    const handleAnchorClick = () => {\n      if (!slots.anchor) {\n        openViewer()\n      }\n    }\n\n    useClickOutside([content, controls], closeViewer)\n\n    const document = useDocument()\n    const teleportTarget = computed(() => document.value?.body)\n\n    return {\n      content,\n      controls,\n\n      teleportTarget,\n      isOpened,\n\n      openViewer,\n      closeViewer,\n      handleAnchorClick,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n\n.va-viewer {\n  --va-image-position: relative;\n}\n\n.va-viewer-content {\n  position: fixed;\n  inset: 0;\n  z-index: var(--va-viewer-content-overlay-z-index);\n  display: flex;\n  justify-content: center;\n  background-color: var(--va-viewer-content-overlay-background-color);\n\n  &__main-area {\n    --va-image-content-position: relative;\n\n    display: flex;\n\n    & > * {\n      width: auto;\n      max-width: unset;\n    }\n  }\n\n  &__controls-panel {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: var(--va-viewer-content-controls-panel-z-index);\n    display: flex;\n    justify-content: var(--va-viewer-content-controls-panel-justify-content);\n    padding: var(--va-viewer-content-controls-panel-padding);\n    background-color: var(--va-viewer-content-controls-panel-background-color);\n  }\n}\n</style>\n"],"names":["_openBlock","_createElementBlock","_Fragment","_createElementVNode","_mergeProps","_renderSlot","_normalizeProps","_guardReactiveProps","_createCommentVNode","_createBlock","_Teleport"],"mappings":";;;;MAoBW,aAAU,EAAA,OAAA;MACb,aAAM;AAAA,EAAA,KAAA;AAAA;;MAQN,aAAM;AAAA,EAAA,KAAA;AAAA;;;;AAzBT,SAAAA,UAAO,GAAAC,mBAAAC,UAAA,MAAA;AAAA,IAAAC,mBAAA,OAAAC,WAAA,EAAA,OAAA,YAAA,GAAA,KAAA,QAAA;AAAA,MAER,SAAA,OAGE,iFADU,GAAU,IAAA;AAAA,IAAA,CAGT,GAAA;AAAA,MAAAC,WAAb,KAA8B,QAAA,UAAAC,eAAAC,mBAAA,EAAA,YAAA,KAAA,WAAA,CAAA,CAAA,CAAA;AAAA,MAAA,CAAA,KAAA,OAAA,SAAAF,WAAA,KAAA,QAAA,WAAA,EAAA,KAAA,EAAA,CAAA,IAIxBG,mBAAQ,IAAA,IAAA;AAAA,IAAA,GAAA,EAAA;AAAA,kCACKC,YAAAC,UAAA;AAAA,MAAA,KAAA;AAAA,MAEnB,IAAA,KAAA;AAAA,IAAA,GAAA;AAAA,yBAKwB,OAAK,YAAA;AAAA,QAAIP,mBAAA,OAAA,YAAA;AAAA,UAAA,CAAA,KAAA,OAAA,QAC7BE,WAAqB,KAAA,QAAA,WAAA,EAAA,KAAA,EAAA,CAAA,IAAAG,mBAAA,IAAA,IAAA;AAAA,UAGvBH,WAAA,KAAA,QAAA,OAAA;AAAA,QAIE,GAAA,GAAA;AAAA,QAeOF,mBAAA,OAAA,YAAA;AAAA,UAAAE,WATL,KAQS,QAAA,UAAA;AAAA,UAAAA,WAPD,KAAiC,QAAA,SAAAC,eAAAC,mBAAA,EAAA,OAAA,KAAA,YAAA,CAAA,CAAA,GAAA,MAAA;AAAA,YACjCJ,mBAAA,UAAA;AAAA,cAAA,OAAA;AAAA,cAEN,SAGE,OAAA,CAAA,MAAA,OAAA,CAAA,IAAA,IAAA,SAAA,KAAA,eAAA,KAAA,YAAA,GAAA,IAAA;AAAA,YAAA,GAAA;AAAA,0BADM,oBAAmB;AAAA,gBAAA,MAAA;AAAA;;;;;;;;;;"}