{"version":3,"file":"VaConfig.js","sources":["../../../../../src/components/va-config/VaConfig.vue"],"sourcesContent":["<template>\n  <CssVarsRenderer v-if=\"doRenderCssVars\" v-bind=\"$attrs\">\n    <slot />\n  </CssVarsRenderer>\n  <slot v-else />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType, h, Fragment } from 'vue'\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\nimport { ComponentConfig } from '../../services/component-config'\n\nimport { provideLocalConfig, useLocalConfig } from '../../composables/useLocalConfig'\nimport { useGlobalConfigProvider } from './hooks/useGlobalConfigProvider'\nimport { PartialGlobalConfig } from '../../services/global-config'\nimport { renderSlotNodes } from '../../utils/headless'\nimport { useColors } from '../../composables'\n\nconst CssVarsRenderer = defineComponent({\n  name: 'VaCssVarsRenderer',\n\n  inheritAttrs: false,\n\n  setup (props, { slots, attrs }) {\n    const { colorsToCSSVariable, colors } = useColors()\n\n    const style = computed(() => {\n      return colorsToCSSVariable(colors)\n    })\n\n    return () => h(Fragment, attrs, renderSlotNodes(slots.default, {}, {\n      style: style.value,\n    }) || undefined)\n  },\n})\n\nexport default defineComponent({\n  name: 'VaConfig',\n  components: { CssVarsRenderer },\n  props: {\n    ...useComponentPresetProp,\n    components: { type: Object as PropType<ComponentConfig>, default: () => ({}) },\n    colors: { type: Object as PropType<PartialGlobalConfig['colors']> },\n    i18n: { type: Object as PropType<PartialGlobalConfig['i18n']> },\n  },\n  inheritAttrs: false,\n  setup (props) {\n    const prevChain = useLocalConfig()\n    // We want it to be an array and not a merged object for optimization purposes\n    const nextChain = computed(() => [...prevChain.value, props.components])\n\n    provideLocalConfig(nextChain)\n\n    const newConfig = useGlobalConfigProvider(computed(() => {\n      const config = {} as any\n\n      if (props.colors) {\n        config.colors = props.colors\n      }\n\n      if (props.i18n) {\n        config.i18n = props.i18n\n      }\n\n      return config\n    }))\n\n    const doRenderCssVars = computed(() => {\n      return Boolean(props.colors)\n    })\n\n    return {\n      newConfig,\n      doRenderCssVars,\n    }\n  },\n})\n</script>\n"],"names":["_resolveComponent","_createBlock","_normalizeProps","_mergeProps","_withCtx","_renderSlot"],"mappings":";;;;AACwC,QAAA,6BAAAA,iBAAA,iBAAA;8CAC5BC,YAAA,4BAAAC,eAAAC,WAAA,EAAA,KAAA,EAAA,GAAA,KAAA,MAAA,CAAA,GAAA;AAAA,IAAA,SAAAC,QAAA,MAAA;AAAA;;IAEV,GAAA;AAAA,EAAA,GAAA,EAAA,KAAAC,WAAA,KAAA,QAAA,WAAA,EAAA,KAAA,EAAA,CAAA;;;"}