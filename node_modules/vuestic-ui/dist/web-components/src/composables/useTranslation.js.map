{"version":3,"file":"useTranslation.js","sources":["../../../../src/composables/useTranslation.ts"],"sourcesContent":["import { computed } from 'vue'\nimport { useGlobalConfig } from '../composables'\nimport { I18nConfig } from '../services/i18n'\nimport { warn } from '../utils/console'\n\ntype Stringable = number | string | boolean | undefined\n\nconst applyI18nTemplate = (key: string, values?: Record<string, Stringable>) => {\n  if (!values) { return key }\n\n  Object.keys(values).forEach((valueKey) => {\n    key = key.replace(`{${valueKey}}`, String(values[valueKey]))\n  })\n  return key\n}\n\nexport const useTranslation = () => {\n  const { globalConfig } = useGlobalConfig()\n\n  const config = computed(() => globalConfig.value.i18n)\n\n  return {\n    /** Translate prop. Translate only if key has `$t:` prefix */\n    tp: <Key extends string | undefined>(key: Key, values?: Record<string, Stringable>): string => {\n      if (!key) { return '' }\n\n      if (key.startsWith('$t:')) {\n        key = (config.value[key.slice(3) as keyof I18nConfig] || key) as NonNullable<Key>\n      }\n\n      return (applyI18nTemplate(key, values) || key)\n    },\n    t (key: string, values?: Record<string, Stringable>) {\n      const translated = config.value[key as keyof I18nConfig]\n      if (!translated) {\n        warn(`${key} not found in VuesticUI i18n config`)\n        return key\n      }\n      return (applyI18nTemplate(translated, values) || key)\n    },\n  }\n}\n"],"names":[],"mappings":";;;AAOA,MAAM,oBAAoB,CAAC,KAAa,WAAwC;AAC9E,MAAI,CAAC,QAAQ;AAAS,WAAA;AAAA,EAAI;AAE1B,SAAO,KAAK,MAAM,EAAE,QAAQ,CAAC,aAAa;AAClC,UAAA,IAAI,QAAQ,IAAI,aAAa,OAAO,OAAO,QAAQ,CAAC,CAAC;AAAA,EAAA,CAC5D;AACM,SAAA;AACT;AAEO,MAAM,iBAAiB,MAAM;AAC5B,QAAA,EAAE,iBAAiB;AAEzB,QAAM,SAAS,SAAS,MAAM,aAAa,MAAM,IAAI;AAE9C,SAAA;AAAA;AAAA,IAEL,IAAI,CAAiC,KAAU,WAAgD;AAC7F,UAAI,CAAC,KAAK;AAAS,eAAA;AAAA,MAAG;AAElB,UAAA,IAAI,WAAW,KAAK,GAAG;AACzB,cAAO,OAAO,MAAM,IAAI,MAAM,CAAC,CAAqB,KAAK;AAAA,MAC3D;AAEQ,aAAA,kBAAkB,KAAK,MAAM,KAAK;AAAA,IAC5C;AAAA,IACA,EAAG,KAAa,QAAqC;AAC7C,YAAA,aAAa,OAAO,MAAM,GAAuB;AACvD,UAAI,CAAC,YAAY;AACf,aAAK,GAAG,wCAAwC;AACzC,eAAA;AAAA,MACT;AACQ,aAAA,kBAAkB,YAAY,MAAM,KAAK;AAAA,IACnD;AAAA,EAAA;AAEJ;"}