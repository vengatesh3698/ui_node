{"version":3,"file":"VaPagination.mjs","sources":["../../../../../src/components/va-pagination/VaPagination.vue"],"sourcesContent":["<template>\n  <nav\n    v-if=\"showPagination\"\n    class=\"va-pagination\"\n    :aria-label=\"tp($props.ariaLabel)\"\n    :class=\"classComputed\"\n    @keydown.left.stop=\"goPrevPage\"\n    @keydown.right.stop=\"goNextPage\"\n    @keydown.up.stop=\"goPrevPage\"\n    @keydown.down.stop=\"goNextPage\"\n  >\n    <slot\n      v-if=\"showBoundaryLinks\" name=\"firstPageLink\"\n      v-bind=\"{ onClick: () => onUserInput(1), disabled: $props.disabled || currentValue === 1 }\"\n    >\n      <va-button\n        v-if=\"showBoundaryLinks\"\n        :aria-label=\"tp($props.ariaGoToTheFirstPageLabel)\"\n        :disabled=\"$props.disabled || currentValue === 1\"\n        :icon=\"$props.boundaryIconLeft\"\n        v-bind=\"buttonPropsComputed\"\n        @click=\"onUserInput(1)\"\n      />\n    </slot>\n    <slot\n      v-if=\"showDirectionLinks\" name=\"prevPageLink\"\n      v-bind=\"{ onClick: goPrevPage, disabled: $props.disabled || currentValue === 1 }\"\n    >\n      <va-button\n        v-if=\"showDirectionLinks\"\n        :aria-label=\"tp($props.ariaGoToPreviousPageLabel)\"\n        :disabled=\"$props.disabled || currentValue === 1\"\n        :icon=\"$props.directionIconLeft\"\n        v-bind=\"buttonPropsComputed\"\n        @click=\"goPrevPage\"\n      />\n    </slot>\n\n    <slot v-if=\"!$props.input\">\n      <va-button\n        v-for=\"(n, i) in paginationRange\" :key=\"i\"\n        :ref=\"setItemRefByIndex(i)\"\n        :class=\"{ 'va-button--ellipsis': n === '...', 'va-button--current': n === currentValue}\"\n        :aria-label=\"tp($props.ariaGoToSpecificPageLabel, { page: n })\"\n        :aria-current=\"n === currentValue\"\n        :disabled=\"$props.disabled || n === '...'\"\n        v-bind=\"getPageButtonProps(n)\"\n        @click=\"onUserInput(n)\"\n      >\n        {{ n }}\n      </va-button>\n    </slot>\n    <input\n      v-else\n      v-model=\"inputValue\"\n      ref=\"htmlInput\"\n      class=\"va-pagination__input va-button\"\n      :aria-label=\"tp($props.ariaGoToSpecificPageInputLabel)\"\n      :style=\"inputStyleComputed\"\n      :class=\"inputClassComputed\"\n      v-bind=\"inputAttributesComputed\"\n      @keydown.enter=\"changeValue\"\n      @focus=\"focusInput\"\n      @blur=\"changeValue\"\n    />\n\n    <slot\n      v-if=\"showDirectionLinks\" name=\"nextPageLink\"\n      v-bind=\"{ onClick: goNextPage, disabled: $props.disabled || currentValue === lastPage }\"\n    >\n      <va-button\n        v-if=\"showDirectionLinks\"\n        :aria-label=\"tp($props.ariaGoToNextPageLabel)\"\n        :disabled=\"$props.disabled || currentValue === lastPage\"\n        :icon=\"$props.directionIconRight\"\n        v-bind=\"buttonPropsComputed\"\n        @click=\"goNextPage\"\n      />\n    </slot>\n    <slot\n      v-if=\"showBoundaryLinks\" name=\"lastPageLink\"\n      v-bind=\"{ onClick: () => onUserInput(lastPage), disabled: $props.disabled || currentValue === lastPage }\"\n    >\n      <va-button\n        v-if=\"showBoundaryLinks\"\n        :aria-label=\"tp($props.ariaGoToLastPageLabel)\"\n        :disabled=\"$props.disabled || currentValue === lastPage\"\n        :icon=\"$props.boundaryIconRight\"\n        v-bind=\"buttonPropsComputed\"\n        @click=\"onUserInput(lastPage)\"\n      />\n    </slot>\n  </nav>\n</template>\n\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  PropType,\n  ref,\n  toRefs,\n  shallowRef,\n  computed,\n  watch,\n  nextTick,\n  WritableComputedRef,\n} from 'vue'\nimport clamp from 'lodash/clamp.js'\nimport pick from 'lodash/pick.js'\n\nimport { isDev } from '../../utils/env'\nimport {\n  useBem,\n  useComponentPresetProp,\n  useColors,\n  useStateful, useStatefulProps, useStatefulEmits,\n  useArrayRefs,\n  useTranslation,\n} from '../../composables'\nimport { setPaginationRange } from './setPaginationRange'\n\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaPagination',\n  components: { VaButton },\n  emits: [...useStatefulEmits],\n  props: {\n    ...useStatefulProps,\n    ...useComponentPresetProp,\n    modelValue: { type: Number, default: 1 },\n    visiblePages: { type: Number, default: 0 },\n    pages: { type: Number, default: 0 },\n    disabled: { type: Boolean, default: false },\n    color: { type: String, default: 'primary' },\n    size: {\n      type: String as PropType<'small' | 'medium' | 'large'>,\n      default: 'medium',\n      validator: (v: string) => ['small', 'medium', 'large'].includes(v),\n    },\n    boundaryLinks: { type: Boolean, default: true },\n    boundaryNumbers: { type: Boolean, default: false },\n    directionLinks: { type: Boolean, default: true },\n    input: { type: Boolean, default: false },\n    hideOnSinglePage: { type: Boolean, default: false },\n    total: { type: Number, default: null },\n    pageSize: { type: Number, default: null },\n    boundaryIconLeft: { type: String, default: 'va-arrow-first' },\n    boundaryIconRight: { type: String, default: 'va-arrow-last' },\n    directionIconLeft: { type: String, default: 'va-arrow-left' },\n    directionIconRight: { type: String, default: 'va-arrow-right' },\n    gapped: { type: Boolean, default: false },\n    borderColor: { type: String, default: '' },\n    rounded: { type: Boolean, default: false },\n    activePageColor: { type: String, default: '' },\n    buttonsPreset: { type: String, default: 'primary' },\n\n    ariaLabel: { type: String, default: '$t:pagination' },\n    ariaGoToTheFirstPageLabel: { type: String, default: '$t:goToTheFirstPage' },\n    ariaGoToPreviousPageLabel: { type: String, default: '$t:goToPreviousPage' },\n    ariaGoToSpecificPageLabel: { type: String, default: '$t:goToSpecificPage' },\n    ariaGoToSpecificPageInputLabel: { type: String, default: '$t:goToSpecificPageInput' },\n    ariaGoToNextPageLabel: { type: String, default: '$t:goNextPage' },\n    ariaGoToLastPageLabel: { type: String, default: '$t:goLastPage' },\n  },\n\n  setup (props, { emit }) {\n    const htmlInput = shallowRef<HTMLInputElement>()\n\n    const inputValue = ref('')\n\n    const usesTotal = computed(() => !!((props.total || props.total === 0) && props.pageSize))\n\n    const { valueComputed }: { valueComputed: WritableComputedRef<number> } = useStateful(props, emit)\n\n    const currentValue = computed({\n      get: () => usesTotal.value ? Math.ceil(valueComputed.value / props.pageSize) || 1 : valueComputed.value,\n      set: (value) => { valueComputed.value = value },\n    })\n\n    const paginationRange = computed(() => {\n      const { visiblePages, total, pageSize, boundaryNumbers, pages } = props\n\n      const value = currentValue.value || 1\n      const totalPages = usesTotal.value ? Math.ceil(total / pageSize) : pages\n\n      return setPaginationRange(value, visiblePages, totalPages, boundaryNumbers)\n    })\n\n    const lastPage = computed(() => usesTotal.value ? Math.ceil(props.total / props.pageSize) || 1 : +props.pages)\n\n    const isLastPageNotVisible = computed(() => ((!!props.visiblePages && lastPage.value > props.visiblePages)) || props.input)\n\n    const showBoundaryLinks = computed(() => {\n      const { boundaryLinks, boundaryNumbers } = props\n\n      return isLastPageNotVisible.value && boundaryLinks && !boundaryNumbers\n    })\n\n    const showDirectionLinks = computed(() => isLastPageNotVisible.value && props.directionLinks)\n\n    const showPagination = computed(() => lastPage.value > 1 || (!props.hideOnSinglePage && lastPage.value <= 1))\n\n    const focusInput = () => {\n      inputValue.value = String(currentValue.value)\n\n      nextTick(() => htmlInput.value?.setSelectionRange(0, htmlInput.value.value.length))\n    }\n\n    const { setItemRefByIndex, itemRefs } = useArrayRefs()\n    const onUserInput = (pageNum: number | '...') => {\n      if (pageNum === '...' || pageNum === currentValue.value) { return }\n\n      const limitedPageNum = clamp(pageNum, 1, lastPage.value)\n      currentValue.value = usesTotal.value\n        ? (limitedPageNum - 1) * props.pageSize + 1\n        : limitedPageNum\n\n      itemRefs.value[pageNum - 1]?.focus()\n    }\n\n    const resetInput = () => {\n      inputValue.value = ''\n      htmlInput.value?.blur()\n    }\n\n    const changeValue = () => {\n      if (+inputValue.value === currentValue.value) {\n        resetInput()\n      }\n\n      if (!inputValue.value.length) { return }\n\n      let pageNum = Number.parseInt(inputValue.value)\n\n      switch (true) {\n        case pageNum < 1:\n          pageNum = 1; break\n        case pageNum > lastPage.value:\n          pageNum = lastPage.value; break\n        case isNaN(pageNum):\n          pageNum = currentValue.value; break\n        default: break\n      }\n\n      onUserInput(pageNum)\n      resetInput()\n    }\n\n    const { getColor, colorToRgba } = useColors()\n\n    const inputBorderColorComputed = computed(() => {\n      const { color, buttonsPreset } = toRefs(props)\n\n      if (!color.value) { return 'transparent' }\n\n      switch (buttonsPreset.value) {\n        case 'default':\n          return getColor(color.value)\n        case undefined:\n        case 'primary':\n          return colorToRgba(getColor(color.value), 0.1)\n        default:\n          return 'transparent'\n      }\n    })\n\n    const inputStyleComputed = computed(() => ({\n      cursor: 'default',\n      color: getColor(props.color),\n      opacity: props.disabled ? 0.4 : 1,\n      borderColor: inputBorderColorComputed.value,\n    }))\n\n    watch([usesTotal, () => props.pages], () => {\n      if (isDev && usesTotal.value && props.pages) {\n        throw new Error('Please, use either `total` and `page-size` props, or `pages`.')\n      }\n    })\n\n    const inputAttributesComputed = computed(() => ({\n      disabled: props.disabled,\n      placeholder: `${currentValue.value}/${lastPage.value}`,\n    }))\n\n    const buttonPropsComputed = computed(() => ({\n      size: props.size,\n      preset: props.buttonsPreset,\n      color: props.color,\n      borderColor: props.borderColor,\n      round: props.rounded,\n    }))\n\n    const currentPageButtonProps = computed(() => ({\n      preset: props.buttonsPreset === 'default' ? 'primary' : 'default',\n      color: props.activePageColor || props.color,\n    }))\n\n    const getPageButtonProps = (n: number | '...') => {\n      if (!isNaN(+n) && n === currentValue.value) {\n        return Object.assign({}, buttonPropsComputed.value, currentPageButtonProps.value)\n      }\n\n      return buttonPropsComputed.value\n    }\n\n    const isStandAloneInput = computed(() => props.input && !props.boundaryLinks && !props.directionLinks)\n    const inputClassComputed = useBem('va-pagination__input', () => ({\n      sm: props.size === 'small' && isStandAloneInput.value,\n      md: props.size === 'medium' && isStandAloneInput.value,\n      lg: props.size === 'large' && isStandAloneInput.value,\n      auto: !isStandAloneInput.value,\n    }))\n\n    const classComputed = useBem('va-pagination', () => ({\n      ...pick(props, ['gapped', 'rounded', 'disabled']),\n      bordered: !!props.borderColor,\n    }))\n\n    const goNextPage = () => onUserInput(currentValue.value + 1)\n    const goPrevPage = () => onUserInput(currentValue.value - 1)\n\n    return {\n      ...useTranslation(),\n      getPageButtonProps,\n      inputClassComputed,\n      classComputed,\n      currentValue,\n      lastPage,\n      changeValue,\n      inputValue,\n      showPagination,\n      showBoundaryLinks,\n      onUserInput,\n      showDirectionLinks,\n      paginationRange,\n      focusInput,\n      inputStyleComputed,\n      inputAttributesComputed,\n      goNextPage,\n      goPrevPage,\n      buttonPropsComputed,\n      htmlInput,\n      setItemRefByIndex,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-pagination {\n  display: flex;\n  font-family: var(--va-font-family);\n\n  &__input {\n    background: var(--va-pagination-input-background);\n    border-style: var(--va-pagination-input-border-style);\n    border-width: var(--va-pagination-input-border-width);\n    text-align: var(--va-pagination-input-text-align);\n    font-size: var(--va-pagination-input-font-size);\n    font-weight: normal;\n\n    // by default input's height relies on va-button size\n    &--sm {\n      height: var(--va-pagination-button-sm-size);\n    }\n\n    &--md {\n      height: var(--va-pagination-button-size);\n    }\n\n    &--lg {\n      height: var(--va-pagination-button-lg-size);\n    }\n\n    &--auto {\n      height: auto;\n    }\n  }\n\n  .va-button {\n    &.va-input {\n      cursor: default;\n    }\n\n    &--small {\n      height: var(--va-pagination-button-sm-size);\n      min-width: var(--va-pagination-button-sm-size);\n    }\n\n    &--normal {\n      height: var(--va-pagination-button-size);\n      min-width: var(--va-pagination-button-size);\n    }\n\n    &--large {\n      height: var(--va-pagination-button-lg-size);\n      min-width: var(--va-pagination-button-lg-size);\n    }\n\n    &--ellipsis {\n      cursor: default;\n      opacity: 1;\n\n      & > .va-button__content {\n        opacity: 0.4;\n      }\n    }\n\n    &:focus-visible {\n      outline-offset: -2px;\n\n      @include keyboard-focus-outline();\n    }\n  }\n\n  & > :not(:first-child):not(:last-child) {\n    border-radius: 0;\n  }\n\n  & > :first-child {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  & > :last-child {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  &--gapped {\n    &.va-pagination > .va-button {\n      border-radius: var(--va-button-border-radius);\n      margin-right: var(--va-pagination-gap);\n      border-style: solid;\n\n      &:last-child {\n        margin-right: 0;\n      }\n    }\n  }\n\n  &--bordered {\n    &.va-pagination > .va-button {\n      border-style: solid;\n\n      &::before {\n        border-radius: unset;\n      }\n    }\n  }\n\n  &--rounded {\n    &.va-pagination > .va-button {\n      border-radius: 50%;\n\n      &::before {\n        border-radius: inherit;\n      }\n\n      &.va-button--small {\n        &.va-button--icon-only {\n          height: var(--va-pagination-button-sm-size);\n          width: var(--va-pagination-button-sm-size);\n        }\n\n        & .va-button__content {\n          padding-right: var(--va-button-sm-content-px);\n          padding-left: var(--va-button-sm-content-px);\n        }\n      }\n\n      &.va-button--normal {\n        &.va-button--icon-only {\n          height: var(--va-pagination-button-size);\n          width: var(--va-pagination-button-size);\n        }\n\n        & .va-button__content {\n          padding-right: var(--va-button-content-px);\n          padding-left: var(--va-button-content-px);\n        }\n      }\n\n      &.va-button--large {\n        &.va-button--icon-only {\n          height: var(--va-pagination-button-lg-size);\n          width: var(--va-pagination-button-lg-size);\n        }\n\n        & .va-button__content {\n          padding-right: var(--va-button-lg-content-px);\n          padding-left: var(--va-button-lg-content-px);\n        }\n      }\n    }\n  }\n}\n</style>\n"],"names":["_resolveComponent","_openBlock","_createElementBlock","_normalizeClass","_withKeys","_withModifiers","_renderSlot","_normalizeProps","_mergeProps","_createBlock","_createCommentVNode","_Fragment","_renderList","_withDirectives","_vModelDynamic"],"mappings":"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"}