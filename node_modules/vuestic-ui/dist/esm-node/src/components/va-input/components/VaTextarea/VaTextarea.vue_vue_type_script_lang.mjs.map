{"version":3,"file":"VaTextarea.vue_vue_type_script_lang.mjs","sources":["../../../../../../../src/components/va-input/components/VaTextarea/VaTextarea.vue"],"sourcesContent":["<template>\n  <textarea\n    ref=\"textarea\"\n    class=\"textarea\"\n    :style=\"computedStyle\"\n    v-bind=\"{ ...computedProps, ...listeners }\"\n    :value=\"modelValue\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, onMounted, ref, watch, nextTick, CSSProperties, shallowRef } from 'vue'\nimport pick from 'lodash/pick.js'\n\nimport { useFormFieldProps, useEmitProxy } from '../../../../composables'\nimport { useTextareaRowHeight } from './useTextareaRowHeight'\n\nconst positiveNumberValidator = (val: number) => {\n  if (val > 0 && (val | 0) === val) {\n    return true\n  }\n  throw new Error(`\\`minRows|maxRows\\` must be a positive integer greater than 0, but ${val} is provided`)\n}\n\nconst { createEmits, createListeners } = useEmitProxy([\n  'input', 'change', 'click', 'update:modelValue',\n])\n\nexport default defineComponent({\n  name: 'VaTextarea',\n\n  props: {\n    ...useFormFieldProps,\n    modelValue: { type: [String, Number], default: '' },\n    placeholder: { type: String },\n    autosize: { type: Boolean, default: false },\n    minRows: {\n      type: Number,\n      default: 1,\n      validator: positiveNumberValidator,\n    },\n    maxRows: {\n      type: Number,\n      validator: positiveNumberValidator,\n    },\n  },\n\n  emits: createEmits(),\n\n  setup (props, { emit }) {\n    const textarea = shallowRef<HTMLTextAreaElement>()\n\n    const rowHeight = ref(-1)\n    const height = ref(-1)\n    const { calculateRowHeight, calculateHeight } = useTextareaRowHeight(textarea)\n\n    const isResizable = computed(() => {\n      return Boolean((props.autosize || props.maxRows || props.minRows !== 1) && textarea.value)\n    })\n\n    const updateRowHeight = () => {\n      if (isResizable.value) {\n        rowHeight.value = calculateRowHeight()\n      }\n    }\n\n    const updateHeight = () => {\n      if (isResizable.value) {\n        height.value = calculateHeight()\n      }\n    }\n\n    onMounted(() => {\n      updateRowHeight()\n      updateHeight()\n    })\n\n    watch(() => props.modelValue, () => {\n      nextTick(updateHeight)\n    })\n\n    const computedStyle = computed(() => ({\n      minHeight: rowHeight.value * props.minRows + 'px',\n      maxHeight: props.maxRows ? (rowHeight.value * props.maxRows + 'px') : undefined,\n      height: height.value + 'px',\n      resize: isResizable.value ? undefined : 'none',\n    }) as CSSProperties)\n\n    const computedProps = computed(() => ({\n      ...pick(props, ['disabled', 'readonly', 'placeholder', 'ariaLabel']),\n    }))\n\n    const focus = () => {\n      textarea.value?.focus()\n    }\n\n    const blur = () => {\n      textarea.value?.blur()\n    }\n\n    return {\n      textarea,\n      computedStyle,\n      listeners: createListeners(emit),\n      computedProps,\n      focus,\n      blur,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n.textarea {\n  padding: 0;\n  border: 0;\n  font-family: var(--va-font-family);\n}\n</style>\n"],"names":[],"mappings":";;;;;AAiBA,MAAM,0BAA0B,CAAC,QAAgB;AAC/C,MAAI,MAAM,MAAM,MAAM,OAAO,KAAK;AACzB,WAAA;AAAA,EACT;AACM,QAAA,IAAI,MAAM,sEAAsE,iBAAiB;AACzG;AAEA,MAAM,EAAE,aAAa,gBAAgB,IAAI,aAAa;AAAA,EACpD;AAAA,EAAS;AAAA,EAAU;AAAA,EAAS;AAC9B,CAAC;AAED,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,GAAG;AAAA,IACH,YAAY,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS,GAAG;AAAA,IAClD,aAAa,EAAE,MAAM,OAAO;AAAA,IAC5B,UAAU,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IAC1C,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,MACT,WAAW;AAAA,IACb;AAAA,IACA,SAAS;AAAA,MACP,MAAM;AAAA,MACN,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,YAAY;AAAA,EAEnB,MAAO,OAAO,EAAE,QAAQ;AACtB,UAAM,WAAW;AAEX,UAAA,YAAY,IAAI,EAAE;AAClB,UAAA,SAAS,IAAI,EAAE;AACrB,UAAM,EAAE,oBAAoB,gBAAgB,IAAI,qBAAqB,QAAQ;AAEvE,UAAA,cAAc,SAAS,MAAM;AAC1B,aAAA,SAAS,MAAM,YAAY,MAAM,WAAW,MAAM,YAAY,MAAM,SAAS,KAAK;AAAA,IAAA,CAC1F;AAED,UAAM,kBAAkB,MAAM;AAC5B,UAAI,YAAY,OAAO;AACrB,kBAAU,QAAQ;MACpB;AAAA,IAAA;AAGF,UAAM,eAAe,MAAM;AACzB,UAAI,YAAY,OAAO;AACrB,eAAO,QAAQ;MACjB;AAAA,IAAA;AAGF,cAAU,MAAM;AACE;AACH;IAAA,CACd;AAEK,UAAA,MAAM,MAAM,YAAY,MAAM;AAClC,eAAS,YAAY;AAAA,IAAA,CACtB;AAEK,UAAA,gBAAgB,SAAS,OAAO;AAAA,MACpC,WAAW,UAAU,QAAQ,MAAM,UAAU;AAAA,MAC7C,WAAW,MAAM,UAAW,UAAU,QAAQ,MAAM,UAAU,OAAQ;AAAA,MACtE,QAAQ,OAAO,QAAQ;AAAA,MACvB,QAAQ,YAAY,QAAQ,SAAY;AAAA,IACvB,EAAA;AAEb,UAAA,gBAAgB,SAAS,OAAO;AAAA,MACpC,GAAG,KAAK,OAAO,CAAC,YAAY,YAAY,eAAe,WAAW,CAAC;AAAA,IACnE,EAAA;AAEF,UAAM,QAAQ,MAAM;;AAClB,qBAAS,UAAT,mBAAgB;AAAA,IAAM;AAGxB,UAAM,OAAO,MAAM;;AACjB,qBAAS,UAAT,mBAAgB;AAAA,IAAK;AAGhB,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA,WAAW,gBAAgB,IAAI;AAAA,MAC/B;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;"}