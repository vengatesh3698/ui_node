{"version":3,"file":"VaRatingItem.vue_vue_type_script_lang.mjs","sources":["../../../../../../../src/components/va-rating/components/VaRatingItem/VaRatingItem.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootEl\"\n    role=\"button\"\n    class=\"va-rating-item\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.enter=\"onClick\"\n    @keydown.space.prevent=\"onClick\"\n    @mousemove=\"onMouseMove\"\n    @mouseleave=\"onMouseLeave\"\n    @click=\"onClick\"\n  >\n    <slot v-bind=\"{ value: visibleValue, onClick }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        tag=\"button\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        :color=\"computedColor\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef, watch } from 'vue'\n\nimport { useColors, useSyncProp } from '../../../../composables'\n\nimport { RatingValue } from '../../types'\n\nimport { VaIcon } from '../../../va-icon'\n\nexport default defineComponent({\n  name: 'VaRatingItem',\n\n  components: { VaIcon },\n\n  props: {\n    modelValue: { type: Number, default: 0 },\n    icon: { type: String, default: 'star' },\n    halfIcon: { type: String, default: 'star_half' },\n    emptyIcon: { type: String, default: 'star_outline' },\n    halves: { type: Boolean, default: false },\n    hover: { type: Boolean, default: false },\n    tabindex: { type: [String, Number], default: 0 },\n    disabled: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    size: { type: [String, Number], default: 'medium' },\n    unselectedColor: { type: String },\n    color: { type: String, default: 'primary' },\n  },\n\n  emits: ['update:modelValue', 'click', 'hover'],\n\n  setup (props, { emit }) {\n    const rootEl = shallowRef<HTMLElement>()\n\n    const [modelValue] = useSyncProp('modelValue', props, emit, RatingValue.EMPTY)\n    const hoveredValue = ref<number | null>(null)\n\n    const visibleValue = computed(() => {\n      if (props.hover && !props.disabled && !props.readonly) {\n        return hoveredValue.value || modelValue.value\n      }\n      return modelValue.value\n    })\n\n    const { getColor } = useColors()\n    const computedColor = computed(() => getColor(\n      props.unselectedColor && visibleValue.value === RatingValue.EMPTY\n        ? props.unselectedColor\n        : props.color,\n    ))\n\n    const onMouseMove = (ev: MouseEvent) => {\n      if (!rootEl.value) { return }\n      const { offsetX } = ev\n      const iconWidth = rootEl.value.clientWidth\n\n      if (props.halves) {\n        hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL\n      } else {\n        hoveredValue.value = RatingValue.FULL\n      }\n    }\n\n    const onMouseLeave = () => {\n      hoveredValue.value = null\n    }\n\n    const onEnter = () => {\n      modelValue.value = 1\n    }\n\n    const onClick = () => {\n      modelValue.value = hoveredValue.value || RatingValue.FULL\n      emit('click', hoveredValue.value || RatingValue.FULL)\n    }\n\n    watch(hoveredValue, () => emit('hover', hoveredValue.value || RatingValue.EMPTY))\n\n    return {\n      computedColor,\n      rootEl,\n      onEnter,\n      onClick,\n      onMouseMove,\n      onMouseLeave,\n      visibleValue,\n\n      computedIconName: computed(() => {\n        if (props.halves && visibleValue.value === RatingValue.HALF) {\n          return props.halfIcon\n        }\n        if (visibleValue.value === RatingValue.EMPTY) {\n          return props.emptyIcon\n        }\n\n        return props.icon\n      }),\n      tabIndexComputed: computed(() => props.disabled ? -1 : props.tabindex),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  @include keyboard-focus-outline($radius: 2px);\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"names":[],"mappings":";;;;;AAkCA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EAEN,YAAY,EAAE,OAAO;AAAA,EAErB,OAAO;AAAA,IACL,YAAY,EAAE,MAAM,QAAQ,SAAS,EAAE;AAAA,IACvC,MAAM,EAAE,MAAM,QAAQ,SAAS,OAAO;AAAA,IACtC,UAAU,EAAE,MAAM,QAAQ,SAAS,YAAY;AAAA,IAC/C,WAAW,EAAE,MAAM,QAAQ,SAAS,eAAe;AAAA,IACnD,QAAQ,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACxC,OAAO,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IACvC,UAAU,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS,EAAE;AAAA,IAC/C,UAAU,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IAC1C,UAAU,EAAE,MAAM,SAAS,SAAS,MAAM;AAAA,IAC1C,MAAM,EAAE,MAAM,CAAC,QAAQ,MAAM,GAAG,SAAS,SAAS;AAAA,IAClD,iBAAiB,EAAE,MAAM,OAAO;AAAA,IAChC,OAAO,EAAE,MAAM,QAAQ,SAAS,UAAU;AAAA,EAC5C;AAAA,EAEA,OAAO,CAAC,qBAAqB,SAAS,OAAO;AAAA,EAE7C,MAAO,OAAO,EAAE,QAAQ;AACtB,UAAM,SAAS;AAET,UAAA,CAAC,UAAU,IAAI,YAAY,cAAc,OAAO,MAAM,YAAY,KAAK;AACvE,UAAA,eAAe,IAAmB,IAAI;AAEtC,UAAA,eAAe,SAAS,MAAM;AAClC,UAAI,MAAM,SAAS,CAAC,MAAM,YAAY,CAAC,MAAM,UAAU;AAC9C,eAAA,aAAa,SAAS,WAAW;AAAA,MAC1C;AACA,aAAO,WAAW;AAAA,IAAA,CACnB;AAEK,UAAA,EAAE,aAAa;AACf,UAAA,gBAAgB,SAAS,MAAM;AAAA,MACnC,MAAM,mBAAmB,aAAa,UAAU,YAAY,QACxD,MAAM,kBACN,MAAM;AAAA,IAAA,CACX;AAEK,UAAA,cAAc,CAAC,OAAmB;AAClC,UAAA,CAAC,OAAO,OAAO;AAAE;AAAA,MAAO;AACtB,YAAA,EAAE,QAAY,IAAA;AACd,YAAA,YAAY,OAAO,MAAM;AAE/B,UAAI,MAAM,QAAQ;AAChB,qBAAa,QAAQ,UAAU,aAAa,YAAY,OAAO,YAAY,OAAO,YAAY;AAAA,MAAA,OACzF;AACL,qBAAa,QAAQ,YAAY;AAAA,MACnC;AAAA,IAAA;AAGF,UAAM,eAAe,MAAM;AACzB,mBAAa,QAAQ;AAAA,IAAA;AAGvB,UAAM,UAAU,MAAM;AACpB,iBAAW,QAAQ;AAAA,IAAA;AAGrB,UAAM,UAAU,MAAM;AACT,iBAAA,QAAQ,aAAa,SAAS,YAAY;AACrD,WAAK,SAAS,aAAa,SAAS,YAAY,IAAI;AAAA,IAAA;AAGhD,UAAA,cAAc,MAAM,KAAK,SAAS,aAAa,SAAS,YAAY,KAAK,CAAC;AAEzE,WAAA;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAEA,kBAAkB,SAAS,MAAM;AAC/B,YAAI,MAAM,UAAU,aAAa,UAAU,YAAY,MAAM;AAC3D,iBAAO,MAAM;AAAA,QACf;AACI,YAAA,aAAa,UAAU,YAAY,OAAO;AAC5C,iBAAO,MAAM;AAAA,QACf;AAEA,eAAO,MAAM;AAAA,MAAA,CACd;AAAA,MACD,kBAAkB,SAAS,MAAM,MAAM,WAAW,KAAK,MAAM,QAAQ;AAAA,IAAA;AAAA,EAEzE;AACF,CAAC;"}