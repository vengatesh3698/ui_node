{"version":3,"file":"VaCarousel.vue_vue_type_script_lang.mjs","sources":["../../../../../src/components/va-carousel/VaCarousel.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-carousel\"\n    :class=\"{\n      'va-carousel--vertical': $props.vertical,\n      [`va-carousel--${$props.effect}`]: true\n    }\"\n    :style=\"{ height: ratio ? 'auto' : height }\"\n    role=\"region\"\n    :aria-label=\"tp($props.ariaLabel)\"\n  >\n    <template v-if=\"$props.arrows\">\n      <div\n        v-if=\"doShowPrevButton\"\n        class=\"va-carousel__arrow va-carousel__arrow--left\"\n        @click=\"prev\"\n        @keydown.enter.stop=\"prev\"\n      >\n        <slot name=\"prev-arrow\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :color=\"hover ? computedHoverColor : computedColor\"\n              :icon=\"vertical ? 'va-arrow-up' : 'va-arrow-left'\"\n              :aria-label=\"tp($props.ariaPreviousLabel)\"\n            />\n          </va-hover>\n        </slot>\n      </div>\n      <div\n        v-if=\"doShowNextButton\"\n        class=\"va-carousel__arrow va-carousel__arrow--right\"\n        @click=\"next\"\n        @keydown.enter.stop=\"next\"\n      >\n        <slot name=\"next-arrow\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :color=\"hover ? computedHoverColor : computedColor\"\n              :icon=\"vertical ? 'va-arrow-down' : 'va-arrow-right'\"\n              :aria-label=\"tp($props.ariaNextLabel)\"\n            />\n          </va-hover>\n        </slot>\n      </div>\n    </template>\n\n    <div class=\"va-carousel__indicators\" v-if=\"$props.indicators\">\n      <div\n        class=\"va-carousel__indicator\"\n        v-for=\"(item, index) in $props.items\" :key=\"index\"\n        :class=\"{ 'va-carousel__indicator--active': index === modelValue }\"\n        v-bind=\"indicatorTrigger === 'hover' ? { onmouseover: () => goTo(index) } : { onclick: () => goTo(index) }\"\n      >\n        <slot name=\"indicator\" v-bind=\"{ item, index, goTo, isActive: isCurrentSlide(index) }\">\n          <va-hover #default=\"{ hover }\" stateful>\n            <va-button\n              :aria-label=\"tp($props.ariaGoToSlideLabel, { index: index + 1 })\"\n              round\n              :color=\"isCurrentSlide(index) ? computedActiveColor : (hover ? computedHoverColor : computedColor)\"\n            >\n              {{ index + 1 }}\n            </va-button>\n          </va-hover>\n        </slot>\n      </div>\n    </div>\n\n    <div class=\"va-carousel__content\">\n      <div\n        ref=\"slidesContainer\"\n        class=\"va-carousel__slides\"\n        :style=\"computedSlidesStyle\"\n        role=\"list\"\n      >\n        <div\n          v-for=\"(item, index) in slides\" :key=\"item\"\n          role=\"listitem\"\n          class=\"va-carousel__slide\"\n          :style=\"slideStyleComputed\"\n          :aria-hidden=\"!isCurrentSlide(index)\"\n          :aria-current=\"isCurrentSlide(index)\"\n          :aria-label=\"tp($props.ariaSlideOfLabel, { index: index + 1, length: slides.length })\"\n        >\n          <slot v-bind=\"{ item, index, goTo, isActive: isCurrentSlide(index) }\">\n            <va-image\n              v-bind=\"vaImageProps\"\n              :src=\"isObjectSlides ? item.src : item\"\n              :alt=\"isObjectSlides ? item.alt : ''\"\n              :draggable=\"false\"\n            />\n          </slot>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, shallowRef, PropType, computed } from 'vue'\nimport { useCarousel } from './hooks/useCarousel'\nimport { useCarouselAnimation } from './hooks/useCarouselAnimation'\nimport { useCarouselColor } from './hooks/useCarouselColors'\nimport {\n  useStateful, useStatefulProps, useStatefulEmits,\n  useSwipe, useSwipeProps, useComponentPresetProp,\n  useTranslation,\n} from '../../composables'\n\nimport { VaImage } from '../va-image'\nimport { VaButton } from '../va-button'\nimport { VaHover } from '../va-hover'\n\nimport type { SwipeState } from '../../composables'\n\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nconst VaImageProps = extractComponentProps(VaImage, ['src', 'alt'])\n\nexport default defineComponent({\n  name: 'VaCarousel',\n\n  components: { VaImage, VaButton, VaHover },\n\n  props: {\n    ...useSwipeProps,\n    ...useStatefulProps,\n    ...useComponentPresetProp,\n    ...VaImageProps,\n\n    modelValue: { type: Number, default: 0 },\n    items: { type: Array as PropType<any[]>, required: true },\n\n    // Animations\n    autoscroll: { type: Boolean, default: false },\n    autoscrollInterval: { type: Number, default: 1000 },\n    autoscrollPauseDuration: { type: Number, default: 2000 },\n    infinite: { type: Boolean, default: false },\n    fadeKeyframe: { type: String, default: 'va-carousel-fade-appear 1s' },\n\n    // Visual\n    arrows: { type: Boolean, default: true },\n    indicators: { type: Boolean, default: true },\n    indicatorTrigger: {\n      type: String as PropType<'click' | 'hover'>,\n      default: 'click',\n      validator: (value: string) => ['click', 'hover'].includes(value),\n    },\n    vertical: { type: Boolean, default: false },\n    height: { type: String, default: '300px' },\n    effect: {\n      type: String as PropType<'fade' | 'transition'>,\n      default: 'transition',\n      validator: (value: string) => ['fade', 'transition'].includes(value),\n    },\n    color: { type: String, default: 'primary' },\n    ratio: { type: Number },\n\n    ariaLabel: { type: String, default: '$t:carousel' },\n    ariaPreviousLabel: { type: String, default: '$t:goPreviousSlide' },\n    ariaNextLabel: { type: String, default: '$t:goNextSlide' },\n    ariaGoToSlideLabel: { type: String, default: '$t:goSlide' },\n    ariaSlideOfLabel: { type: String, default: '$t:slideOf' },\n  },\n\n  emits: [...useStatefulEmits],\n\n  setup (props, { emit }) {\n    const { valueComputed: currentSlide } = useStateful(props, emit, 'modelValue', { defaultValue: 0 })\n\n    const {\n      goTo, next, prev,\n      doShowNextButton, doShowPrevButton,\n    } = useCarousel(props, currentSlide)\n\n    const { withPause, computedSlidesStyle, slides } = useCarouselAnimation(props, currentSlide)\n    const isObjectSlides = computed(() => {\n      return props.items.length && props.items.every((el) => !!el && typeof el === 'object' && !!el?.src)\n    })\n    const isCurrentSlide = (index: number) => index === currentSlide.value\n\n    const slideStyleComputed = computed(() => ({\n      animation: props.effect === 'fade' ? 'fadeKeyframe' : undefined,\n    }))\n\n    // swiping\n    const slidesContainer = shallowRef<HTMLElement>()\n    const onSwipe = (state: SwipeState) => {\n      switch (state.direction) {\n        case 'right':\n        case 'up':\n          doShowPrevButton.value && prev()\n          break\n        case 'left':\n        case 'down':\n          doShowNextButton.value && next()\n      }\n    }\n    useSwipe(props, slidesContainer, onSwipe)\n\n    return {\n      vaImageProps: filterComponentProps(VaImageProps),\n      doShowNextButton,\n      doShowPrevButton,\n      computedSlidesStyle,\n      slideStyleComputed,\n      goTo: withPause(goTo),\n      prev: withPause(prev),\n      next: withPause(next),\n      slides,\n      isObjectSlides,\n      isCurrentSlide,\n      ...useCarouselColor(),\n      ...useTranslation(),\n      slidesContainer,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"./_variables.scss\";\n\n@keyframes va-carousel-fade-appear {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.va-carousel {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  min-height: var(--va-carousel-min-height);\n  background: var(--va-carousel-background);\n  box-shadow: var(--va-carousel-box-shadow);\n  border-radius: var(--va-carousel-border-radius);\n  position: relative;\n  overflow: hidden;\n\n  &__content {\n    flex: 1;\n    width: 100%;\n    white-space: nowrap;\n  }\n\n  &__slides {\n    width: 100%;\n    height: 100%;\n    transition: var(--va-carousel-slides-transition);\n  }\n\n  &__slide {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n\n  &__indicators {\n    width: 100%;\n    position: absolute;\n    bottom: var(--va-carousel-padding);\n    display: flex;\n    justify-content: center;\n    z-index: 2;\n    overflow-x: auto;\n    left: 50%;\n    transform: translateX(-50%);\n\n    @include va-scroll();\n\n    & > * {\n      margin: 0 var(--va-carousel-indicators-gap);\n    }\n  }\n\n  &__arrow {\n    z-index: 1;\n    width: max-content;\n    height: max-content;\n\n    &--right {\n      right: var(--va-carousel-padding);\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    &--left {\n      left: var(--va-carousel-padding);\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n  }\n\n  &--vertical {\n    .va-carousel {\n      &__slide {\n        display: flex;\n      }\n\n      &__arrow {\n        z-index: 1;\n\n        &--right {\n          bottom: var(--va-carousel-padding);\n          top: auto;\n          left: 50%;\n          transform: translateX(-50%);\n        }\n\n        &--left {\n          top: var(--va-carousel-padding);\n          left: 50%;\n          transform: translateX(-50%);\n        }\n      }\n\n      &__indicators {\n        left: var(--va-carousel-padding);\n        flex-direction: column;\n        width: auto;\n        height: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        overflow-x: hidden;\n        overflow-y: auto;\n\n        & > * {\n          margin: var(--va-carousel-indicators-gap) 0;\n        }\n      }\n    }\n  }\n\n  .va-image {\n    height: 100%;\n    width: 100%;\n  }\n\n  .va-button {\n    @include keyboard-focus-outline($offset: -2px);\n  }\n}\n</style>\n"],"names":[],"mappings":"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"}