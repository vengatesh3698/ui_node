{"version":3,"file":"useDropdownNavigation.mjs","sources":["../../../../../../src/components/va-dropdown/hooks/useDropdownNavigation.ts"],"sourcesContent":["import { Ref } from 'vue'\nimport { useEvent } from '../../../composables'\n\nconst isTyping = (e: Event) => {\n  const target = e.target as HTMLElement\n  if (!(target.tagName === 'INPUT' || target.tagName === 'TEXTAREA')) { return false }\n  if (target.attributes.getNamedItem('readonly')) { return false }\n  return true\n}\n\nconst openKey = ['ArrowDown', 'ArrowUp', 'Enter', 'Space']\n\nexport const useKeyboardNavigation = (anchorRef: Ref<HTMLElement | undefined>, isOpened: Ref<boolean>) => {\n  useEvent('keydown', (e) => {\n    if (isTyping(e)) { return }\n\n    if (!openKey.includes(e.key)) { return }\n\n    isOpened.value = !isOpened.value\n    e.preventDefault()\n  }, anchorRef)\n\n  useEvent('keydown', (e) => {\n    if (e.key === 'Escape' && isOpened.value) {\n      isOpened.value = false\n      e.preventDefault()\n    }\n  }, true)\n}\n\ntype MouseEventName = 'mouseleave' | 'mouseenter' | 'click' | 'dblclick' | 'contextmenu'\nexport const useMouseNavigation = (\n  anchorRef: Ref<HTMLElement | undefined>,\n  listeners: Record<MouseEventName, (e: MouseEvent) => any>,\n) => {\n  useEvent(['click', 'contextmenu', 'dblclick'], (e: MouseEvent) => {\n    if (isTyping(e)) { return }\n\n    listeners[e.type as MouseEventName](e)\n  }, anchorRef)\n\n  useEvent(['mouseleave', 'mouseenter'], (e: MouseEvent) => {\n    listeners[e.type as MouseEventName](e)\n  }, anchorRef)\n}\n"],"names":[],"mappings":";AAGA,MAAM,WAAW,CAAC,MAAa;AAC7B,QAAM,SAAS,EAAE;AACjB,MAAI,EAAE,OAAO,YAAY,WAAW,OAAO,YAAY,aAAa;AAAS,WAAA;AAAA,EAAM;AACnF,MAAI,OAAO,WAAW,aAAa,UAAU,GAAG;AAAS,WAAA;AAAA,EAAM;AACxD,SAAA;AACT;AAEA,MAAM,UAAU,CAAC,aAAa,WAAW,SAAS,OAAO;AAE5C,MAAA,wBAAwB,CAAC,WAAyC,aAA2B;AAC/F,WAAA,WAAW,CAAC,MAAM;AACrB,QAAA,SAAS,CAAC,GAAG;AAAE;AAAA,IAAO;AAE1B,QAAI,CAAC,QAAQ,SAAS,EAAE,GAAG,GAAG;AAAE;AAAA,IAAO;AAE9B,aAAA,QAAQ,CAAC,SAAS;AAC3B,MAAE,eAAe;AAAA,KAChB,SAAS;AAEH,WAAA,WAAW,CAAC,MAAM;AACzB,QAAI,EAAE,QAAQ,YAAY,SAAS,OAAO;AACxC,eAAS,QAAQ;AACjB,QAAE,eAAe;AAAA,IACnB;AAAA,KACC,IAAI;AACT;AAGa,MAAA,qBAAqB,CAChC,WACA,cACG;AACH,WAAS,CAAC,SAAS,eAAe,UAAU,GAAG,CAAC,MAAkB;AAC5D,QAAA,SAAS,CAAC,GAAG;AAAE;AAAA,IAAO;AAEhB,cAAA,EAAE,IAAsB,EAAE,CAAC;AAAA,KACpC,SAAS;AAEZ,WAAS,CAAC,cAAc,YAAY,GAAG,CAAC,MAAkB;AAC9C,cAAA,EAAE,IAAsB,EAAE,CAAC;AAAA,KACpC,SAAS;AACd;"}