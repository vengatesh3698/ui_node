{"version":3,"file":"useRouterLink.mjs","sources":["../../../../src/composables/useRouterLink.ts"],"sourcesContent":["import { computed, PropType, getCurrentInstance, type ExtractPropTypes } from 'vue'\n\nimport { useGlobalConfig } from '../services/global-config'\n\nexport const useRouterLinkProps = {\n  tag: { type: String, default: 'span' },\n  to: { type: [String, Object] as PropType<string | Record<string, any>>, default: undefined },\n  replace: { type: Boolean, default: undefined },\n  append: { type: Boolean, default: undefined },\n  exact: { type: Boolean, default: undefined },\n  activeClass: { type: String, default: undefined },\n  exactActiveClass: { type: String, default: undefined },\n  href: { type: String, default: undefined },\n  target: { type: String, default: undefined },\n  disabled: { type: Boolean, default: false },\n}\n\nexport const useRouterLink = (props: ExtractPropTypes<typeof useRouterLinkProps>) => {\n  const globalProperties = computed(() => getCurrentInstance()?.appContext.config.globalProperties)\n  const vueRouter = computed(() => globalProperties.value?.$router)\n  const vueRoute = computed(() => globalProperties.value?.$route)\n\n  const { getGlobalConfig } = useGlobalConfig()\n  const routerComponent = getGlobalConfig().routerComponent\n  const isNuxt = !!globalProperties.value?.$nuxt\n  const isNuxtLink = computed(() => !!(!props.disabled && props.to && isNuxt && routerComponent))\n\n  const tagComputed = computed(() => {\n    if (props.disabled) { return props.tag }\n\n    if (props.href && !props.to) { return 'a' }\n\n    if (isNuxtLink.value) { return routerComponent }\n\n    if (props.to) { return 'router-link' }\n\n    return props.tag || 'div'\n  })\n\n  const isLinkTag = computed(() => isNuxtLink.value || ['a', 'router-link'].includes(tagComputed.value as string))\n\n  const linkAttributesComputed = computed(() => {\n    if (!isLinkTag.value) { return {} }\n\n    return tagComputed.value === 'a'\n      ? {\n        target: props.target,\n        href: hrefComputed.value,\n      }\n      : {\n        target: props.target,\n        to: props.to,\n        replace: props.replace,\n        append: props.append,\n        activeClass: props.activeClass,\n        exact: props.exact,\n        exactActiveClass: props.exactActiveClass,\n      }\n  })\n\n  const isActiveRouterLink = computed(() => {\n    if (!vueRouter.value || !props.to) { return false }\n\n    const to = vueRouter.value.resolve(props.to).href\n    const currentHref = vueRouter.value.currentRoute.value.path\n\n    return to.replace('#', '') === currentHref.replace('#', '')\n  })\n\n  const hrefComputed = computed(() => {\n    // to resolve href on server for SEO optimization\n    // https://github.com/nuxt/nuxt.js/issues/8204\n    // @ts-ignore\n    return props.href || (props.to ? vueRouter.value?.resolve(props.to, vueRoute.value).href : undefined)\n  })\n\n  return {\n    isLinkTag,\n    tagComputed,\n    hrefComputed,\n    isActiveRouterLink,\n    linkAttributesComputed,\n  }\n}\n"],"names":["_a"],"mappings":";;AAIO,MAAM,qBAAqB;AAAA,EAChC,KAAK,EAAE,MAAM,QAAQ,SAAS,OAAO;AAAA,EACrC,IAAI,EAAE,MAAM,CAAC,QAAQ,MAAM,GAA6C,SAAS,OAAU;AAAA,EAC3F,SAAS,EAAE,MAAM,SAAS,SAAS,OAAU;AAAA,EAC7C,QAAQ,EAAE,MAAM,SAAS,SAAS,OAAU;AAAA,EAC5C,OAAO,EAAE,MAAM,SAAS,SAAS,OAAU;AAAA,EAC3C,aAAa,EAAE,MAAM,QAAQ,SAAS,OAAU;AAAA,EAChD,kBAAkB,EAAE,MAAM,QAAQ,SAAS,OAAU;AAAA,EACrD,MAAM,EAAE,MAAM,QAAQ,SAAS,OAAU;AAAA,EACzC,QAAQ,EAAE,MAAM,QAAQ,SAAS,OAAU;AAAA,EAC3C,UAAU,EAAE,MAAM,SAAS,SAAS,MAAM;AAC5C;AAEa,MAAA,gBAAgB,CAAC,UAAuD;;AACnF,QAAM,mBAAmB,SAAS,MAAM;;AAAA,YAAAA,MAAA,mBAAsB,MAAtB,gBAAAA,IAAsB,WAAW,OAAO;AAAA,GAAgB;AAChG,QAAM,YAAY,SAAS,MAAA;;AAAM,YAAAA,MAAA,iBAAiB,UAAjB,gBAAAA,IAAwB;AAAA,GAAO;AAChE,QAAM,WAAW,SAAS,MAAA;;AAAM,YAAAA,MAAA,iBAAiB,UAAjB,gBAAAA,IAAwB;AAAA,GAAM;AAExD,QAAA,EAAE,oBAAoB;AACtB,QAAA,kBAAkB,gBAAkB,EAAA;AAC1C,QAAM,SAAS,CAAC,GAAC,sBAAiB,UAAjB,mBAAwB;AACnC,QAAA,aAAa,SAAS,MAAM,CAAC,EAAE,CAAC,MAAM,YAAY,MAAM,MAAM,UAAU,gBAAgB;AAExF,QAAA,cAAc,SAAS,MAAM;AACjC,QAAI,MAAM,UAAU;AAAE,aAAO,MAAM;AAAA,IAAI;AAEvC,QAAI,MAAM,QAAQ,CAAC,MAAM,IAAI;AAAS,aAAA;AAAA,IAAI;AAE1C,QAAI,WAAW,OAAO;AAAS,aAAA;AAAA,IAAgB;AAE/C,QAAI,MAAM,IAAI;AAAS,aAAA;AAAA,IAAc;AAErC,WAAO,MAAM,OAAO;AAAA,EAAA,CACrB;AAED,QAAM,YAAY,SAAS,MAAM,WAAW,SAAS,CAAC,KAAK,aAAa,EAAE,SAAS,YAAY,KAAe,CAAC;AAEzG,QAAA,yBAAyB,SAAS,MAAM;AACxC,QAAA,CAAC,UAAU,OAAO;AAAE,aAAO;IAAG;AAE3B,WAAA,YAAY,UAAU,MACzB;AAAA,MACA,QAAQ,MAAM;AAAA,MACd,MAAM,aAAa;AAAA,IAAA,IAEnB;AAAA,MACA,QAAQ,MAAM;AAAA,MACd,IAAI,MAAM;AAAA,MACV,SAAS,MAAM;AAAA,MACf,QAAQ,MAAM;AAAA,MACd,aAAa,MAAM;AAAA,MACnB,OAAO,MAAM;AAAA,MACb,kBAAkB,MAAM;AAAA,IAAA;AAAA,EAC1B,CACH;AAEK,QAAA,qBAAqB,SAAS,MAAM;AACxC,QAAI,CAAC,UAAU,SAAS,CAAC,MAAM,IAAI;AAAS,aAAA;AAAA,IAAM;AAElD,UAAM,KAAK,UAAU,MAAM,QAAQ,MAAM,EAAE,EAAE;AAC7C,UAAM,cAAc,UAAU,MAAM,aAAa,MAAM;AAEhD,WAAA,GAAG,QAAQ,KAAK,EAAE,MAAM,YAAY,QAAQ,KAAK,EAAE;AAAA,EAAA,CAC3D;AAEK,QAAA,eAAe,SAAS,MAAM;;AAIlC,WAAO,MAAM,SAAS,MAAM,MAAKA,MAAA,UAAU,UAAV,gBAAAA,IAAiB,QAAQ,MAAM,IAAI,SAAS,OAAO,OAAO;AAAA,EAAA,CAC5F;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;"}