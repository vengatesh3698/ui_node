{"ast":null,"code":"import { defineComponent, computed, ref, watch } from \"vue\";\nimport { p as pick } from \"../../../vendor-fff696df.mjs\";\nimport { u as useAvatarProps } from \"./hooks/useAvatarProps-7897713e.mjs\";\nimport { e as extractComponentProps } from \"../../utils/component-options/extract-component-options-6b96d215.mjs\";\nimport { V as VaIcon } from \"../va-icon/index-0ebbc0f2.mjs\";\nimport { V as VaProgressCircle } from \"../va-progress-circle/index-655f5cb0.mjs\";\nimport { V as VaFallback } from \"../va-fallback/index-e34db7ca.mjs\";\nimport { f as filterComponentProps } from \"../../utils/component-options/filter-props-9727421a.mjs\";\nimport { u as useLoadingProps } from \"../../composables/useLoading-5a447e96.mjs\";\nimport { u as useSizeProps, a as useSize } from \"../../composables/useSize-3142f2a0.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useColors } from \"../../composables/useColors-f23d24ff.mjs\";\nimport { u as useTextColor } from \"../../composables/useTextColor-f36510ca.mjs\";\nimport { u as useBem } from \"../../composables/useBem-10a5bc6e.mjs\";\nconst VaFallbackProps = extractComponentProps(VaFallback);\nconst _sfc_main = defineComponent({\n  name: \"VaAvatar\",\n  components: {\n    VaIcon,\n    VaProgressCircle,\n    VaFallback\n  },\n  props: {\n    ...useLoadingProps,\n    ...useSizeProps,\n    ...useComponentPresetProp,\n    ...useAvatarProps,\n    ...VaFallbackProps,\n    src: {\n      type: String,\n      default: null\n    },\n    icon: {\n      type: String,\n      default: \"\"\n    },\n    alt: {\n      type: String,\n      default: \"\"\n    }\n  },\n  emits: [\"error\", \"fallback\"],\n  setup(props, {\n    emit\n  }) {\n    const {\n      getColor\n    } = useColors();\n    const colorComputed = computed(() => getColor(props.color));\n    const backgroundColorComputed = computed(() => {\n      if (props.loading || props.src && !hasLoadError.value) {\n        return \"transparent\";\n      }\n      return colorComputed.value;\n    });\n    const {\n      sizeComputed,\n      fontSizeComputed\n    } = useSize(props, \"VaAvatar\");\n    const {\n      textColorComputed\n    } = useTextColor();\n    const computedStyle = computed(() => ({\n      fontSize: props.fontSize || fontSizeComputed.value\n    }));\n    const classesComputed = useBem(\"va-avatar\", () => ({\n      ...pick(props, [\"square\"])\n    }));\n    const hasLoadError = ref(false);\n    const onLoadError = event => {\n      hasLoadError.value = true;\n      emit(\"error\", event);\n    };\n    watch(() => props.src, () => {\n      hasLoadError.value = false;\n    });\n    const avatarOptions = computed(() => ({\n      hasError: hasLoadError.value,\n      onError: onLoadError\n    }));\n    return {\n      hasLoadError,\n      sizeComputed,\n      avatarOptions,\n      computedStyle,\n      colorComputed,\n      classesComputed,\n      textColorComputed,\n      backgroundColorComputed,\n      VaFallbackProps: filterComponentProps(VaFallbackProps),\n      onLoadError\n    };\n  }\n});\nexport { _sfc_main as _ };\nimport '../../../VaAvatar.css';","map":{"version":3,"names":["VaFallbackProps","extractComponentProps","VaFallback","_sfc_main","defineComponent","name","components","VaIcon","VaProgressCircle","props","useLoadingProps","useSizeProps","useComponentPresetProp","useAvatarProps","src","type","String","default","icon","alt","emits","setup","emit","getColor","useColors","colorComputed","computed","color","backgroundColorComputed","loading","hasLoadError","value","sizeComputed","fontSizeComputed","useSize","textColorComputed","useTextColor","computedStyle","fontSize","classesComputed","useBem","pick","ref","onLoadError","event","watch","avatarOptions","hasError","onError","filterComponentProps"],"sources":["../../../../../src/components/va-avatar/VaAvatar.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-avatar\"\n    :class=\"classesComputed\"\n    :style=\"typeof computedStyle === 'object' ? (Array.isArray(computedStyle) ? [...computedStyle, `--va-0-background-color-computed: ${String(backgroundColorComputed)};--va-1-text-color-computed: ${String(textColorComputed)};--va-2-size-computed: ${String(sizeComputed)}`] : { ...computedStyle, '--va-0-background-color-computed': String(backgroundColorComputed),'--va-1-text-color-computed': String(textColorComputed),'--va-2-size-computed': String(sizeComputed) }) : computedStyle + `;--va-0-background-color-computed: ${String(backgroundColorComputed)};--va-1-text-color-computed: ${String(textColorComputed)};--va-2-size-computed: ${String(sizeComputed)}`\"\n    :aria-hidden=\"!$props.src\"\n    aria-live=\"polite\"\n  >\n    <va-progress-circle\n      v-if=\"$props.loading\"\n      :size=\"sizeComputed\"\n      :color=\"colorComputed\"\n      indeterminate\n    />\n    <slot v-bind=\"avatarOptions\" v-else>\n      <img\n        v-if=\"$props.src && !hasLoadError\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"onLoadError\"\n      >\n      <slot v-else-if=\"hasLoadError && $props.src\" name=\"fallback\">\n        <va-fallback v-bind=\"VaFallbackProps\" @fallback=\"$emit('fallback')\" />\n      </slot>\n      <va-icon\n        v-else-if=\"$props.icon\"\n        :name=\"$props.icon\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch, computed } from 'vue'\nimport pick from 'lodash/pick'\n\nimport {\n  useBem,\n  useSize,\n  useColors,\n  useTextColor,\n  useSizeProps,\n  useLoadingProps,\n  useComponentPresetProp,\n} from '../../composables'\nimport { extractComponentProps, filterComponentProps } from '../../utils/component-options'\n\nimport { VaIcon, VaProgressCircle, VaFallback } from '../index'\nimport { useAvatarProps } from './hooks/useAvatarProps'\n\nconst VaFallbackProps = extractComponentProps(VaFallback)\n\nexport default defineComponent({\n  name: 'VaAvatar',\n\n  components: { VaIcon, VaProgressCircle, VaFallback },\n\n  props: {\n    ...useLoadingProps,\n    ...useSizeProps,\n    ...useComponentPresetProp,\n    ...useAvatarProps,\n    ...VaFallbackProps,\n\n    src: { type: String, default: null },\n    icon: { type: String, default: '' },\n    alt: { type: String, default: '' },\n  },\n\n  emits: ['error', 'fallback'],\n\n  setup (props, { emit }) {\n    const { getColor } = useColors()\n    const colorComputed = computed(() => getColor(props.color))\n    const backgroundColorComputed = computed(() => {\n      if (props.loading || (props.src && !hasLoadError.value)) {\n        return 'transparent'\n      }\n\n      return colorComputed.value\n    })\n    const { sizeComputed, fontSizeComputed } = useSize(props, 'VaAvatar')\n    const { textColorComputed } = useTextColor()\n\n    const computedStyle = computed(() => ({\n      fontSize: props.fontSize || fontSizeComputed.value,\n    }))\n\n    const classesComputed = useBem('va-avatar', () => ({\n      ...pick(props, ['square']),\n    }))\n\n    const hasLoadError = ref(false)\n\n    const onLoadError = (event: Event) => {\n      hasLoadError.value = true\n      emit('error', event)\n    }\n\n    watch(() => props.src, () => {\n      hasLoadError.value = false\n    })\n\n    const avatarOptions = computed(() => ({\n      hasError: hasLoadError.value,\n      onError: onLoadError,\n    }))\n\n    return {\n      hasLoadError,\n      sizeComputed,\n      avatarOptions,\n      computedStyle,\n      colorComputed,\n      classesComputed,\n      textColorComputed,\n      backgroundColorComputed,\n      VaFallbackProps: filterComponentProps(VaFallbackProps),\n\n      onLoadError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-avatar {\n  align-items: var(--va-avatar-align-items);\n  display: var(--va-avatar-display);\n  justify-content: var(--va-avatar-justify-content);\n  line-height: var(--va-avatar-line-height);\n  position: var(--va-avatar-position);\n  text-align: var(--va-avatar-text-align);\n  vertical-align: var(--va-avatar-vertical-align);\n  border-radius: var(--va-avatar-border-radius);\n  font-family: var(--va-font-family);\n  background-color: var(--va-0-background-color-computed);\n  color: var(--va-1-text-color-computed);\n  width: var(--va-2-size-computed);\n  min-width: var(--va-2-size-computed);  // We only define width because common use case would be flex row, for column we expect user to set appropriate styling externally.\n  height: var(--va-2-size-computed);\n\n  &--square {\n    --va-avatar-border-radius: 0;\n  }\n\n  img,\n  svg {\n    border-radius: inherit;\n    display: inline-flex;\n    height: inherit;\n    width: inherit;\n    margin: auto;\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;AAkDA,MAAMA,eAAA,GAAkBC,qBAAA,CAAsBC,UAAU;AAExD,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENC,UAAA,EAAY;IAAEC,MAAA;IAAQC,gBAAA;IAAkBN;EAAW;EAEnDO,KAAA,EAAO;IACL,GAAGC,eAAA;IACH,GAAGC,YAAA;IACH,GAAGC,sBAAA;IACH,GAAGC,cAAA;IACH,GAAGb,eAAA;IAEHc,GAAA,EAAK;MAAEC,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAK;IACnCC,IAAA,EAAM;MAAEH,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAG;IAClCE,GAAA,EAAK;MAAEJ,IAAA,EAAMC,MAAA;MAAQC,OAAA,EAAS;IAAG;EACnC;EAEAG,KAAA,EAAO,CAAC,SAAS,UAAU;EAE3BC,MAAOZ,KAAA,EAAO;IAAEa;EAAA,GAAQ;IAChB;MAAEC;IAAA,IAAaC,SAAA;IACrB,MAAMC,aAAA,GAAgBC,QAAA,CAAS,MAAMH,QAAA,CAASd,KAAA,CAAMkB,KAAK,CAAC;IACpD,MAAAC,uBAAA,GAA0BF,QAAA,CAAS,MAAM;MAC7C,IAAIjB,KAAA,CAAMoB,OAAA,IAAYpB,KAAA,CAAMK,GAAA,IAAO,CAACgB,YAAA,CAAaC,KAAA,EAAQ;QAChD;MACT;MAEA,OAAON,aAAA,CAAcM,KAAA;IAAA,CACtB;IACD,MAAM;MAAEC,YAAA;MAAcC;IAAA,IAAqBC,OAAA,CAAQzB,KAAA,EAAO,UAAU;IAC9D;MAAE0B;IAAA,IAAsBC,YAAA;IAExB,MAAAC,aAAA,GAAgBX,QAAA,CAAS,OAAO;MACpCY,QAAA,EAAU7B,KAAA,CAAM6B,QAAA,IAAYL,gBAAA,CAAiBF;IAC7C;IAEI,MAAAQ,eAAA,GAAkBC,MAAA,CAAO,aAAa,OAAO;MACjD,GAAGC,IAAA,CAAKhC,KAAA,EAAO,CAAC,QAAQ,CAAC;IACzB;IAEI,MAAAqB,YAAA,GAAeY,GAAA,CAAI,KAAK;IAExB,MAAAC,WAAA,GAAeC,KAAA,IAAiB;MACpCd,YAAA,CAAaC,KAAA,GAAQ;MACrBT,IAAA,CAAK,SAASsB,KAAK;IAAA;IAGfC,KAAA,OAAMpC,KAAA,CAAMK,GAAA,EAAK,MAAM;MAC3BgB,YAAA,CAAaC,KAAA,GAAQ;IAAA,CACtB;IAEK,MAAAe,aAAA,GAAgBpB,QAAA,CAAS,OAAO;MACpCqB,QAAA,EAAUjB,YAAA,CAAaC,KAAA;MACvBiB,OAAA,EAASL;IACT;IAEK;MACLb,YAAA;MACAE,YAAA;MACAc,aAAA;MACAT,aAAA;MACAZ,aAAA;MACAc,eAAA;MACAJ,iBAAA;MACAP,uBAAA;MACA5B,eAAA,EAAiBiD,oBAAA,CAAqBjD,eAAe;MAErD2C;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}