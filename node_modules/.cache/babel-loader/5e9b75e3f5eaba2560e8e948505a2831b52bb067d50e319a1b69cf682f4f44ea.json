{"ast":null,"code":"import { computed, shallowRef, onMounted } from \"vue\";\nimport { u as useHTMLElement } from \"./useHTMLElement-beee793a.mjs\";\nimport { u as useCaptureEvent } from \"./useCaptureEvent-90d008ac.mjs\";\nimport { u as useCurrentElement } from \"./useCurrentElement-a7d22ac8.mjs\";\nconst useActiveElement = () => {\n  const activeEl = shallowRef();\n  const updateActiveElement = () => {\n    activeEl.value = document.activeElement;\n  };\n  onMounted(updateActiveElement);\n  useCaptureEvent(\"focus\", updateActiveElement);\n  useCaptureEvent(\"blur\", updateActiveElement);\n  return activeEl;\n};\nconst useFocusDeep = el => {\n  const focused = useActiveElement();\n  const current = useCurrentElement(el ? useHTMLElement(el) : void 0);\n  let previouslyFocusedElement = null;\n  return computed({\n    get() {\n      var _a;\n      if (!focused.value) {\n        return false;\n      }\n      if (focused.value === current.value) {\n        return true;\n      }\n      const isFocused = (_a = current.value) == null ? void 0 : _a.contains(focused.value);\n      if (isFocused) {\n        previouslyFocusedElement = focused.value;\n      }\n      return isFocused;\n    },\n    set(value) {\n      var _a;\n      let target = previouslyFocusedElement ?? current.value;\n      if (!((_a = current.value) == null ? void 0 : _a.contains(target))) {\n        target = current.value;\n      }\n      if (value) {\n        target == null ? void 0 : target.focus();\n      } else {\n        target == null ? void 0 : target.blur();\n      }\n    }\n  });\n};\nexport { useFocusDeep as u };","map":{"version":3,"names":["useActiveElement","activeEl","shallowRef","updateActiveElement","value","document","activeElement","onMounted","useCaptureEvent","useFocusDeep","el","focused","current","useCurrentElement","useHTMLElement","previouslyFocusedElement","computed","get","isFocused","_a","contains","set","target","focus","blur"],"sources":["../../../../src/composables/useFocusDeep.ts"],"sourcesContent":["import { shallowRef, computed, Ref, onMounted, DefineComponent } from 'vue'\nimport { useHTMLElement } from './useHTMLElement'\nimport { useCaptureEvent } from './useCaptureEvent'\nimport { useCurrentElement } from './useCurrentElement'\nimport { blurElement, focusElement } from '../utils/focus'\n\nconst useActiveElement = () => {\n  const activeEl = shallowRef<HTMLElement>()\n\n  const updateActiveElement = () => {\n    activeEl.value = document.activeElement as HTMLElement\n  }\n\n  onMounted(updateActiveElement)\n\n  useCaptureEvent('focus', updateActiveElement)\n  useCaptureEvent('blur', updateActiveElement)\n\n  return activeEl\n}\n\nexport const useFocusDeep = (el?: Ref<HTMLElement | DefineComponent | undefined>) => {\n  const focused = useActiveElement()\n  const current = useCurrentElement(el ? useHTMLElement(el) : undefined)\n  // Cache previouslyFocusedElement, so we can simply come back to it\n  let previouslyFocusedElement: HTMLElement | null = null\n\n  return computed<boolean | undefined>({\n    get () {\n      if (!focused.value) { return false }\n      if (focused.value === current.value) { return true }\n\n      const isFocused = current.value?.contains(focused.value)\n      if (isFocused) { previouslyFocusedElement = focused.value }\n      return isFocused\n    },\n    set (value) {\n      let target = previouslyFocusedElement ?? current.value\n\n      if (!current.value?.contains(target!)) {\n        target = current.value\n      }\n\n      if (value) {\n        (target)?.focus()\n      } else {\n        (target)?.blur()\n      }\n    },\n  })\n}\n"],"mappings":";;;;AAMA,MAAMA,gBAAA,GAAmBA,CAAA,KAAM;EAC7B,MAAMC,QAAA,GAAWC,UAAA;EAEjB,MAAMC,mBAAA,GAAsBA,CAAA,KAAM;IAChCF,QAAA,CAASG,KAAA,GAAQC,QAAA,CAASC,aAAA;EAAA;EAG5BC,SAAA,CAAUJ,mBAAmB;EAE7BK,eAAA,CAAgB,SAASL,mBAAmB;EAC5CK,eAAA,CAAgB,QAAQL,mBAAmB;EAEpC,OAAAF,QAAA;AACT;AAEa,MAAAQ,YAAA,GAAgBC,EAAA,IAAwD;EACnF,MAAMC,OAAA,GAAUX,gBAAA;EAChB,MAAMY,OAAA,GAAUC,iBAAA,CAAkBH,EAAA,GAAKI,cAAA,CAAeJ,EAAE,IAAI,MAAS;EAErE,IAAIK,wBAAA,GAA+C;EAEnD,OAAOC,QAAA,CAA8B;IACnCC,IAAA,EAAO;;MACD,KAACN,OAAA,CAAQP,KAAA,EAAO;QAAS;MAAM;MAC/B,IAAAO,OAAA,CAAQP,KAAA,KAAUQ,OAAA,CAAQR,KAAA,EAAO;QAAS;MAAK;MAEnD,MAAMc,SAAA,IAAYC,EAAA,GAAAP,OAAA,CAAQR,KAAA,KAAR,gBAAAe,EAAA,CAAeC,QAAA,CAAST,OAAA,CAAQP,KAAA;MAClD,IAAIc,SAAA,EAAW;QAAEH,wBAAA,GAA2BJ,OAAA,CAAQP,KAAA;MAAM;MACnD,OAAAc,SAAA;IACT;IACAG,IAAKjB,KAAA,EAAO;;MACN,IAAAkB,MAAA,GAASP,wBAAA,IAA4BH,OAAA,CAAQR,KAAA;MAEjD,IAAI,GAACe,EAAA,GAAAP,OAAA,CAAQR,KAAA,KAAR,gBAAAe,EAAA,CAAeC,QAAA,CAASE,MAAA,IAAU;QACrCA,MAAA,GAASV,OAAA,CAAQR,KAAA;MACnB;MAEA,IAAIA,KAAA,EAAO;QACRkB,MAAA,oBAAAA,MAAA,CAASC,KAAA;MAAM,OACX;QACJD,MAAA,oBAAAA,MAAA,CAASE,IAAA;MACZ;IACF;EAAA,CACD;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}