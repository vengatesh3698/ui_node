{"ast":null,"code":"import { _ as _sfc_main } from \"./VaRatingItem.vue_vue_type_script_lang-6bef2e53.mjs\";\nimport { resolveComponent, openBlock, createElementBlock, withKeys, withModifiers, renderSlot, normalizeProps, guardReactiveProps, createVNode } from \"vue\";\nimport { _ as _export_sfc } from \"../../../../../plugin-vue_export-helper-cc2b3d55.mjs\";\nconst VaRatingItem_vue_vue_type_style_index_0_lang = \"\";\nconst _hoisted_1 = [\"tabindex\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_va_icon = resolveComponent(\"va-icon\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"rootEl\",\n    role: \"button\",\n    class: \"va-rating-item\",\n    tabindex: _ctx.tabIndexComputed,\n    onKeydown: [_cache[0] || (_cache[0] = withKeys((...args) => _ctx.onClick && _ctx.onClick(...args), [\"enter\"])), _cache[1] || (_cache[1] = withKeys(withModifiers((...args) => _ctx.onClick && _ctx.onClick(...args), [\"prevent\"]), [\"space\"]))],\n    onMousemove: _cache[2] || (_cache[2] = (...args) => _ctx.onMouseMove && _ctx.onMouseMove(...args)),\n    onMouseleave: _cache[3] || (_cache[3] = (...args) => _ctx.onMouseLeave && _ctx.onMouseLeave(...args)),\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, [renderSlot(_ctx.$slots, \"default\", normalizeProps(guardReactiveProps({\n    value: _ctx.visibleValue,\n    onClick: _ctx.onClick\n  })), () => [createVNode(_component_va_icon, {\n    class: \"va-rating-item__wrapper\",\n    tabindex: \"-1\",\n    tag: \"button\",\n    name: _ctx.computedIconName,\n    size: _ctx.$props.size,\n    color: _ctx.computedColor\n  }, null, 8, [\"name\", \"size\", \"color\"])])], 40, _hoisted_1);\n}\nconst _VaRatingItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _VaRatingItem as _ };","map":{"version":3,"names":["resolveComponent","openBlock","createElementBlock","ref","role","class","tabindex","_ctx","tabIndexComputed","onKeydown","_cache","withKeys","withModifiers","args","onClick","onMousemove","onMouseMove","onMouseleave","onMouseLeave","renderSlot","$slots","normalizeProps","guardReactiveProps","value","visibleValue","createVNode","_component_va_icon","tag","name","computedIconName","size","$props","color","computedColor"],"sources":["../../../../../../../src/components/va-rating/components/VaRatingItem/VaRatingItem.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootEl\"\n    role=\"button\"\n    class=\"va-rating-item\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.enter=\"onClick\"\n    @keydown.space.prevent=\"onClick\"\n    @mousemove=\"onMouseMove\"\n    @mouseleave=\"onMouseLeave\"\n    @click=\"onClick\"\n  >\n    <slot v-bind=\"{ value: visibleValue, onClick }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        tag=\"button\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        :color=\"computedColor\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef, watch } from 'vue'\n\nimport { useColors, useSyncProp } from '../../../../composables'\n\nimport { RatingValue } from '../../types'\n\nimport { VaIcon } from '../../../va-icon'\n\nexport default defineComponent({\n  name: 'VaRatingItem',\n\n  components: { VaIcon },\n\n  props: {\n    modelValue: { type: Number, default: 0 },\n    icon: { type: String, default: 'star' },\n    halfIcon: { type: String, default: 'star_half' },\n    emptyIcon: { type: String, default: 'star_outline' },\n    halves: { type: Boolean, default: false },\n    hover: { type: Boolean, default: false },\n    tabindex: { type: [String, Number], default: 0 },\n    disabled: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    size: { type: [String, Number], default: 'medium' },\n    unselectedColor: { type: String },\n    color: { type: String, default: 'primary' },\n  },\n\n  emits: ['update:modelValue', 'click', 'hover'],\n\n  setup (props, { emit }) {\n    const rootEl = shallowRef<HTMLElement>()\n\n    const [modelValue] = useSyncProp('modelValue', props, emit, RatingValue.EMPTY)\n    const hoveredValue = ref<number | null>(null)\n\n    const visibleValue = computed(() => {\n      if (props.hover && !props.disabled && !props.readonly) {\n        return hoveredValue.value || modelValue.value\n      }\n      return modelValue.value\n    })\n\n    const { getColor } = useColors()\n    const computedColor = computed(() => getColor(\n      props.unselectedColor && visibleValue.value === RatingValue.EMPTY\n        ? props.unselectedColor\n        : props.color,\n    ))\n\n    const onMouseMove = (ev: MouseEvent) => {\n      if (!rootEl.value) { return }\n      const { offsetX } = ev\n      const iconWidth = rootEl.value.clientWidth\n\n      if (props.halves) {\n        hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL\n      } else {\n        hoveredValue.value = RatingValue.FULL\n      }\n    }\n\n    const onMouseLeave = () => {\n      hoveredValue.value = null\n    }\n\n    const onEnter = () => {\n      modelValue.value = 1\n    }\n\n    const onClick = () => {\n      modelValue.value = hoveredValue.value || RatingValue.FULL\n      emit('click', hoveredValue.value || RatingValue.FULL)\n    }\n\n    watch(hoveredValue, () => emit('hover', hoveredValue.value || RatingValue.EMPTY))\n\n    return {\n      computedColor,\n      rootEl,\n      onEnter,\n      onClick,\n      onMouseMove,\n      onMouseLeave,\n      visibleValue,\n\n      computedIconName: computed(() => {\n        if (props.halves && visibleValue.value === RatingValue.HALF) {\n          return props.halfIcon\n        }\n        if (visibleValue.value === RatingValue.EMPTY) {\n          return props.emptyIcon\n        }\n\n        return props.icon\n      }),\n      tabIndexComputed: computed(() => props.disabled ? -1 : props.tabindex),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  @include keyboard-focus-outline($radius: 2px);\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"mappings":";;;;;;6BACEA,gBAAA,CAqBM;SAnBCC,SAAA,CAAQ,GAAAC,kBAAA;IACbC,GAAA,EAAK;IACJC,IAAA;IACAC,KAAA;IAAAC,QAAA,EAAAC,IAAA,CAAAC,gBAAA;IAAAC,SAAA,G,oGAEAC,MAAA,QAASA,MAAA,MAAAC,QAAA,CAAAC,aAAA,CAAE,IAAWC,IAAA,KAAAN,IAAA,CAAAO,OAAA,IAAAP,IAAA,CAAAO,OAAA,IAAAD,IAAA,6BACtB;IACAE,WAAA,EAAKL,MAAA,QAAAA,MAAA,UAAAG,IAAA,KAAEN,IAAA,CAAOS,WAAA,IAAAT,IAAA,CAAAS,WAAA,IAAAH,IAAA;IAAAI,YAAA,EAAAP,MAAA,QAAAA,MAAA,UAAAG,IAAA,KAAAN,IAAA,CAAAW,YAAA,IAAAX,IAAA,CAAAW,YAAA,IAAAL,IAAA;IAEfC,OAAA,EAAAJ,MAAA,CASO,CATgB,MAAAA,MAAA,UAAAG,IAAA,KAAAN,IAAA,CAAAO,OAAA,IAAAP,IAAA,CAAAO,OAAA,IAAAD,IAAA;EAAA,IAAAM,UAAA,CAEbZ,IAAA,CAAyBa,MAAA,aAAAC,cAAA,CAAAC,kBAAA;IAAAC,KAAA,EAAAhB,IAAA,CAAAiB,YAAA;IAAAV,OAAA,EAAAP,IAAA,CAAAO;EAAA,YAAAW,WAAA,CACtBC,kBAAA,EAAI;IACbrB,KAAA,EAAI;IACHC,QAAA,EAAM;IACNqB,GAAA,EAAI;IACJC,IAAA,EAAKrB,IAAA,CAAEsB,gBAAA;IAAAC,IAAA,EAAAvB,IAAA,CAAAwB,MAAA,CAAAD,IAAA;IAAAE,KAAA,EAAAzB,IAAA,CAAA0B"},"metadata":{},"sourceType":"module","externalDependencies":[]}