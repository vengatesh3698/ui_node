{"ast":null,"code":"import { defineComponent, ref } from \"vue\";\nimport { V as VaFileUploadKey } from \"../types-8c5c5611.mjs\";\nimport { V as VaButton } from \"../../va-button/index-b0a9ef70.mjs\";\nimport { V as VaListItem, a as VaListItemSection } from \"../../va-list/index-c1a821d7.mjs\";\nimport { V as VaFileUploadUndo } from \"../VaFileUploadUndo/index-4fe4ca4a.mjs\";\nimport { u as useStrictInject } from \"../../../composables/useStrictInject-08ce5ce6.mjs\";\nimport { u as useFocus } from \"../../../composables/useFocus-4393f76a.mjs\";\nimport { u as useBem } from \"../../../composables/useBem-10a5bc6e.mjs\";\nimport { u as useTranslation } from \"../../../composables/useTranslation-acf7d88d.mjs\";\nconst INJECTION_ERROR_MESSAGE = \"The VaFileUploadListItem component should be used in the context of VaFileUpload component\";\nconst _sfc_main = defineComponent({\n  name: \"VaFileUploadListItem\",\n  components: {\n    VaListItem,\n    VaListItemSection,\n    VaFileUploadUndo,\n    VaButton\n  },\n  emits: [\"remove\"],\n  props: {\n    file: {\n      type: Object,\n      default: null\n    },\n    color: {\n      type: String,\n      default: \"success\"\n    },\n    ariaRemoveFileLabel: {\n      type: String,\n      default: \"$t:removeFile\"\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    const {\n      undo,\n      disabled,\n      undoDuration\n    } = useStrictInject(VaFileUploadKey, INJECTION_ERROR_MESSAGE);\n    const {\n      onFocus,\n      onBlur\n    } = useFocus();\n    const removed = ref(false);\n    const removeFile = () => {\n      if (undo.value) {\n        removed.value = true;\n        setTimeout(() => {\n          if (removed.value) {\n            emit(\"remove\");\n            removed.value = false;\n          }\n        }, undoDuration.value ?? 0);\n      } else {\n        emit(\"remove\");\n        removed.value = false;\n      }\n    };\n    const recoverFile = () => {\n      removed.value = false;\n    };\n    const computedClasses = useBem(\"va-file-upload-list-item\", () => ({\n      undo: removed.value\n    }));\n    return {\n      ...useTranslation(),\n      undo,\n      removed,\n      disabled,\n      computedClasses,\n      onBlur,\n      onFocus,\n      removeFile,\n      recoverFile\n    };\n  }\n});\nexport { _sfc_main as _ };\nimport '../../../../VaFileUploadListItem.css';","map":{"version":3,"names":["INJECTION_ERROR_MESSAGE","_sfc_main","defineComponent","name","components","VaListItem","VaListItemSection","VaFileUploadUndo","VaButton","emits","props","file","type","Object","default","color","String","ariaRemoveFileLabel","setup","emit","undo","disabled","undoDuration","useStrictInject","VaFileUploadKey","onFocus","onBlur","useFocus","removed","ref","removeFile","value","setTimeout","recoverFile","computedClasses","useBem","useTranslation"],"sources":["../../../../../../src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue"],"sourcesContent":["<template>\n  <va-list-item\n    class=\"va-file-upload-list-item\"\n    tabindex=\"-1\"\n    :class=\"computedClasses\"\n    :disabled=\"disabled\"\n    :aria-disabled=\"disabled\"\n  >\n    <va-list-item-section v-if=\"removed && undo\">\n      <va-file-upload-undo @recover=\"recoverFile\" />\n    </va-list-item-section>\n    <va-list-item-section v-else>\n      <div class=\"va-file-upload-list-item__content\">\n        <div v-if=\"file && file.name\" class=\"va-file-upload-list-item__name\">\n          {{ file && file.name }}\n        </div>\n        <div class=\"va-file-upload-list-item__size\">\n          {{ file && file.size }}\n        </div>\n        <va-button\n          v-if=\"!disabled\"\n          flat\n          color=\"danger\"\n          icon=\"clear\"\n          class=\"va-file-upload-list-item__delete\"\n          :aria-label=\"tp($props.ariaRemoveFileLabel)\"\n          @click.stop=\"removeFile\"\n          @keydown.enter.stop=\"removeFile\"\n          @keydown.space.stop=\"removeFile\"\n          @focus=\"onFocus\"\n          @blur=\"onBlur\"\n        />\n      </div>\n    </va-list-item-section>\n  </va-list-item>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType } from 'vue'\n\nimport { useBem, useFocus, useStrictInject, useTranslation } from '../../../composables'\nimport { VaFileUploadKey, ConvertedFile } from '../types'\n\nimport { VaButton } from '../../va-button'\nimport { VaListItem, VaListItemSection } from '../../va-list'\nimport { VaFileUploadUndo } from '../VaFileUploadUndo'\n\nconst INJECTION_ERROR_MESSAGE = 'The VaFileUploadListItem component should be used in the context of VaFileUpload component'\n\nexport default defineComponent({\n  name: 'VaFileUploadListItem',\n\n  components: {\n    VaListItem,\n    VaListItemSection,\n    VaFileUploadUndo,\n    VaButton,\n  },\n\n  emits: ['remove'],\n\n  props: {\n    file: { type: Object as PropType<ConvertedFile | null>, default: null },\n    color: { type: String, default: 'success' },\n\n    ariaRemoveFileLabel: { type: String, default: '$t:removeFile' },\n  },\n\n  setup (props, { emit }) {\n    const {\n      undo,\n      disabled,\n      undoDuration,\n    } = useStrictInject(VaFileUploadKey, INJECTION_ERROR_MESSAGE)\n    const { onFocus, onBlur } = useFocus()\n    const removed = ref(false)\n\n    const removeFile = () => {\n      if (undo.value) {\n        removed.value = true\n\n        setTimeout(() => {\n          if (removed.value) {\n            emit('remove')\n            removed.value = false\n          }\n        }, undoDuration.value ?? 0)\n      } else {\n        emit('remove')\n        removed.value = false\n      }\n    }\n\n    const recoverFile = () => { removed.value = false }\n\n    const computedClasses = useBem('va-file-upload-list-item', () => ({\n      undo: removed.value,\n    }))\n\n    return {\n      ...useTranslation(),\n      undo,\n      removed,\n      disabled,\n      computedClasses,\n\n      onBlur,\n      onFocus,\n      removeFile,\n      recoverFile,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n@import \"../../../styles/resources\";\n@import \"variables\";\n\n.va-file-upload-list-item {\n  background-color: var(--va-file-upload-list-item-background-color);\n  box-shadow: var(--va-file-upload-list-item-box-shadow, var(--va-block-box-shadow));\n  border-radius: var(--va-file-upload-list-item-border-radius, var(--va-block-border-radius));\n  position: relative;\n  line-height: 1.5rem;\n  padding: 1.125rem 0.5rem 1rem 1rem;\n  max-width: 100%;\n  width: 100%;\n\n  & + & {\n    margin-top: 0.5rem;\n  }\n\n  .va-list-item__inner {\n    padding: 0;\n    overflow: hidden;\n  }\n\n  &__content {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  &__name {\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    flex-basis: 60%;\n    overflow: hidden;\n  }\n\n  &__size {\n    color: var(--va-file-upload-list-item-size-text-color);\n  }\n\n  &__delete {\n    font-size: 1.5rem;\n    cursor: pointer;\n\n    --va-button-size: 1.5rem;\n  }\n\n  &--undo {\n    overflow: hidden;\n    position: relative;\n\n    .va-list-item-section {\n      padding: 0;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;AA+CA,MAAMA,uBAAA,GAA0B;AAEhC,MAAAC,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENC,UAAA,EAAY;IACVC,UAAA;IACAC,iBAAA;IACAC,gBAAA;IACAC;EACF;EAEAC,KAAA,EAAO,CAAC,QAAQ;EAEhBC,KAAA,EAAO;IACLC,IAAA,EAAM;MAAEC,IAAA,EAAMC,MAAA;MAA0CC,OAAA,EAAS;IAAK;IACtEC,KAAA,EAAO;MAAEH,IAAA,EAAMI,MAAA;MAAQF,OAAA,EAAS;IAAU;IAE1CG,mBAAA,EAAqB;MAAEL,IAAA,EAAMI,MAAA;MAAQF,OAAA,EAAS;IAAgB;EAChE;EAEAI,MAAOR,KAAA,EAAO;IAAES;EAAA,GAAQ;IAChB;MACJC,IAAA;MACAC,QAAA;MACAC;IAAA,IACEC,eAAA,CAAgBC,eAAA,EAAiBxB,uBAAuB;IAC5D,MAAM;MAAEyB,OAAA;MAASC;IAAO,IAAIC,QAAA,CAAS;IAC/B,MAAAC,OAAA,GAAUC,GAAA,CAAI,KAAK;IAEzB,MAAMC,UAAA,GAAaA,CAAA,KAAM;MACvB,IAAIV,IAAA,CAAKW,KAAA,EAAO;QACdH,OAAA,CAAQG,KAAA,GAAQ;QAEhBC,UAAA,CAAW,MAAM;UACf,IAAIJ,OAAA,CAAQG,KAAA,EAAO;YACjBZ,IAAA,CAAK,QAAQ;YACbS,OAAA,CAAQG,KAAA,GAAQ;UAClB;QAAA,GACCT,YAAA,CAAaS,KAAA,IAAS,CAAC;MAAA,OACrB;QACLZ,IAAA,CAAK,QAAQ;QACbS,OAAA,CAAQG,KAAA,GAAQ;MAClB;IAAA;IAGF,MAAME,WAAA,GAAcA,CAAA,KAAM;MAAEL,OAAA,CAAQG,KAAA,GAAQ;IAAA;IAEtC,MAAAG,eAAA,GAAkBC,MAAA,CAAO,4BAA4B,OAAO;MAChEf,IAAA,EAAMQ,OAAA,CAAQG;IACd;IAEK;MACL,GAAGK,cAAA,CAAe;MAClBhB,IAAA;MACAQ,OAAA;MACAP,QAAA;MACAa,eAAA;MAEAR,MAAA;MACAD,OAAA;MACAK,UAAA;MACAG;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}