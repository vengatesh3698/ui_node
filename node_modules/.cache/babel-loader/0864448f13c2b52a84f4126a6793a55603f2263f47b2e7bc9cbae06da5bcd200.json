{"ast":null,"code":"import { reactive, watchEffect, computed } from \"vue\";\nimport { u as useEvent } from \"../../../composables/useEvent-d1ae925d.mjs\";\nconst useCursorAnchor = (anchorRef, noUpdate) => {\n  const mouse = reactive({\n    x: 0,\n    y: 0\n  });\n  useEvent([\"mousemove\", \"mousedown\", \"mouseup\"], e => {\n    const {\n      x,\n      y\n    } = anchorRef.value.getBoundingClientRect();\n    mouse.x = e.clientX - x;\n    mouse.y = e.clientY - y;\n  }, anchorRef);\n  const mouseOffset = {\n    x: 0,\n    y: 0\n  };\n  watchEffect(() => {\n    if (noUpdate.value) {\n      return;\n    }\n    mouseOffset.x = mouse.x;\n    mouseOffset.y = mouse.y;\n  });\n  return computed(() => {\n    if (!anchorRef.value) {\n      return void 0;\n    }\n    const target = anchorRef.value;\n    const getBoundingClientRect = () => {\n      const rect = target.getBoundingClientRect();\n      const x = rect.left + mouseOffset.x;\n      const y = rect.top + mouseOffset.y;\n      return {\n        ...rect,\n        x,\n        y,\n        bottom: y + 1,\n        right: x + 1,\n        left: x,\n        top: y\n      };\n    };\n    return new Proxy(target, {\n      get(target2, key) {\n        if (key === \"getBoundingClientRect\") {\n          return getBoundingClientRect;\n        }\n        return target2[key];\n      }\n    });\n  });\n};\nexport { useCursorAnchor as u };","map":{"version":3,"names":["useCursorAnchor","anchorRef","noUpdate","mouse","reactive","x","y","useEvent","e","value","getBoundingClientRect","clientX","clientY","mouseOffset","watchEffect","computed","target","rect","left","top","bottom","right","Proxy","get","target2","key"],"sources":["../../../../../../src/components/va-dropdown/hooks/useCursorAnchor.ts"],"sourcesContent":["import { computed, reactive, Ref, watch, watchEffect } from 'vue'\nimport { useEvent } from '../../../composables/useEvent'\n\nexport const useCursorAnchor = (anchorRef: Ref<HTMLElement | undefined>, noUpdate: Ref<boolean>) => {\n  const mouse = reactive({ x: 0, y: 0 })\n\n  useEvent(['mousemove', 'mousedown', 'mouseup'], (e: MouseEvent) => {\n    const { x, y } = anchorRef.value!.getBoundingClientRect()\n    mouse.x = e.clientX - x\n    mouse.y = e.clientY - y\n  }, anchorRef)\n\n  const mouseOffset = {\n    x: 0,\n    y: 0,\n  }\n\n  watchEffect(() => {\n    if (noUpdate.value) { return }\n    mouseOffset.x = mouse.x\n    mouseOffset.y = mouse.y\n  })\n\n  return computed(() => {\n    if (!anchorRef.value) { return undefined }\n\n    const target = anchorRef.value\n\n    const getBoundingClientRect = () => {\n      const rect = target.getBoundingClientRect()\n      const x = rect.left + mouseOffset.x\n      const y = rect.top + mouseOffset.y\n\n      return {\n        ...rect,\n        x: x,\n        y: y,\n        bottom: y + 1,\n        right: x + 1,\n        left: x,\n        top: y,\n      }\n    }\n\n    return new Proxy<HTMLElement>(target, {\n      get (target, key: keyof typeof target) {\n        if (key === 'getBoundingClientRect') {\n          return getBoundingClientRect\n        }\n\n        return target[key]\n      },\n    })\n  })\n}\n"],"mappings":";;AAGa,MAAAA,eAAA,GAAkBA,CAACC,SAAA,EAAyCC,QAAA,KAA2B;EAClG,MAAMC,KAAA,GAAQC,QAAA,CAAS;IAAEC,CAAA,EAAG;IAAGC,CAAA,EAAG;EAAA,CAAG;EAErCC,QAAA,CAAS,CAAC,aAAa,aAAa,SAAS,GAAIC,CAAA,IAAkB;IACjE,MAAM;MAAEH,CAAA;MAAGC;IAAA,IAAML,SAAA,CAAUQ,KAAA,CAAOC,qBAAA;IAC5BP,KAAA,CAAAE,CAAA,GAAIG,CAAA,CAAEG,OAAA,GAAUN,CAAA;IAChBF,KAAA,CAAAG,CAAA,GAAIE,CAAA,CAAEI,OAAA,GAAUN,CAAA;EAAA,GACrBL,SAAS;EAEZ,MAAMY,WAAA,GAAc;IAClBR,CAAA,EAAG;IACHC,CAAA,EAAG;EAAA;EAGLQ,WAAA,CAAY,MAAM;IAChB,IAAIZ,QAAA,CAASO,KAAA,EAAO;MAAE;IAAO;IAC7BI,WAAA,CAAYR,CAAA,GAAIF,KAAA,CAAME,CAAA;IACtBQ,WAAA,CAAYP,CAAA,GAAIH,KAAA,CAAMG,CAAA;EAAA,CACvB;EAED,OAAOS,QAAA,CAAS,MAAM;IAChB,KAACd,SAAA,CAAUQ,KAAA,EAAO;MAAS;IAAU;IAEzC,MAAMO,MAAA,GAASf,SAAA,CAAUQ,KAAA;IAEzB,MAAMC,qBAAA,GAAwBA,CAAA,KAAM;MAC5B,MAAAO,IAAA,GAAOD,MAAA,CAAON,qBAAA;MACd,MAAAL,CAAA,GAAIY,IAAA,CAAKC,IAAA,GAAOL,WAAA,CAAYR,CAAA;MAC5B,MAAAC,CAAA,GAAIW,IAAA,CAAKE,GAAA,GAAMN,WAAA,CAAYP,CAAA;MAE1B;QACL,GAAGW,IAAA;QACHZ,CAAA;QACAC,CAAA;QACAc,MAAA,EAAQd,CAAA,GAAI;QACZe,KAAA,EAAOhB,CAAA,GAAI;QACXa,IAAA,EAAMb,CAAA;QACNc,GAAA,EAAKb;MAAA;IACP;IAGK,WAAIgB,KAAA,CAAmBN,MAAA,EAAQ;MACpCO,IAAKC,OAAA,EAAQC,GAAA,EAA0B;QACrC,IAAIA,GAAA,KAAQ,yBAAyB;UAC5B,OAAAf,qBAAA;QACT;QAEA,OAAOc,OAAA,CAAOC,GAAG;MACnB;IAAA,CACD;EAAA,CACF;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}