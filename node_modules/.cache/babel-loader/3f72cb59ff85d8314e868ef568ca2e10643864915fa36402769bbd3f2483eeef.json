{"ast":null,"code":"import { _ as _sfc_main } from \"./VaTimePickerColumn.vue_vue_type_script_lang-9a83a0b0.mjs\";\nimport { resolveComponent, openBlock, createElementBlock, withKeys, withModifiers, normalizeStyle, Fragment, renderList, createBlock, withCtx, createElementVNode, normalizeClass, renderSlot, normalizeProps, guardReactiveProps, createTextVNode, toDisplayString } from \"vue\";\nimport { _ as _export_sfc } from \"../../../../../plugin-vue_export-helper-cc2b3d55.mjs\";\nconst VaTimePickerColumn_vue_vue_type_style_index_0_lang = \"\";\nconst _hoisted_1 = [\"onClick\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_VaTimePickerColumnCell = resolveComponent(\"VaTimePickerColumnCell\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"rootElement\",\n    tabindex: \"0\",\n    class: \"va-time-picker-column\",\n    onKeydown: [_cache[0] || (_cache[0] = withKeys(withModifiers($event => _ctx.makeActiveNext(), [\"stop\", \"prevent\"]), [\"down\"])), _cache[1] || (_cache[1] = withKeys(withModifiers($event => _ctx.makeActiveNext(5), [\"stop\", \"prevent\"]), [\"space\"])), _cache[2] || (_cache[2] = withKeys(withModifiers($event => _ctx.makeActivePrev(), [\"stop\", \"prevent\"]), [\"up\"]))],\n    style: normalizeStyle(_ctx.styleComputed)\n  }, [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.items, (item, index) => {\n    return openBlock(), createBlock(_component_VaTimePickerColumnCell, {\n      key: item,\n      onScrollPassive: _ctx.onScroll,\n      onTouchmovePassive: _ctx.onScroll,\n      onMousewheelPassive: _ctx.onScroll\n    }, {\n      default: withCtx(() => [createElementVNode(\"div\", {\n        class: normalizeClass([\"va-time-picker-cell\", {\n          \"va-time-picker-cell--active\": index === _ctx.$props.activeItemIndex\n        }]),\n        onClick: $event => _ctx.onCellClick(index)\n      }, [renderSlot(_ctx.$slots, \"cell\", normalizeProps(guardReactiveProps({\n        item,\n        index,\n        activeItemIndex: _ctx.activeItemIndex,\n        items: _ctx.items,\n        formattedItem: _ctx.formatCell(item)\n      })), () => [createTextVNode(toDisplayString(_ctx.formatCell(item)), 1)])], 10, _hoisted_1)]),\n      _: 2\n    }, 1032, [\"onScrollPassive\", \"onTouchmovePassive\", \"onMousewheelPassive\"]);\n  }), 128))], 36);\n}\nconst _VaTimePickerColumn = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _VaTimePickerColumn as _ };","map":{"version":3,"names":["_component_VaTimePickerColumnCell","resolveComponent","openBlock","createElementBlock","ref","tabindex","class","onKeydown","_ctx","makeActiveNext","_cache","withKeys","withModifiers","$event","makeActivePrev","style","normalizeStyle","styleComputed","Fragment","renderList","items","item","index","createBlock","key","onScrollPassive","onScroll","onTouchmovePassive","onMousewheelPassive","default","withCtx","createElementVNode","normalizeClass","$props","activeItemIndex","onClick","onCellClick","renderSlot","$slots","normalizeProps","guardReactiveProps","formattedItem","formatCell"],"sources":["../../../../../../../src/components/va-time-picker/components/VaTimePickerColumn/VaTimePickerColumn.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootElement\"\n    tabindex=\"0\"\n    class=\"va-time-picker-column\"\n    @keydown.down.stop.prevent=\"makeActiveNext()\"\n    @keydown.space.stop.prevent=\"makeActiveNext(5)\"\n    @keydown.up.stop.prevent=\"makeActivePrev()\"\n    :style=\"styleComputed\"\n  >\n    <VaTimePickerColumnCell\n      v-for=\"(item, index) in items\" :key=\"item\"\n      @scroll.passive=\"onScroll\"\n      @touchmove.passive=\"onScroll\"\n      @mousewheel.passive=\"onScroll\"\n    >\n      <div\n        class=\"va-time-picker-cell\"\n        :class=\"{ 'va-time-picker-cell--active': index === $props.activeItemIndex }\"\n        @click=\"onCellClick(index)\"\n      >\n        <slot name=\"cell\" v-bind=\"{ item, index, activeItemIndex, items, formattedItem: formatCell(item) }\">\n          {{ formatCell(item) }}\n        </slot>\n      </div>\n    </VaTimePickerColumnCell>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport VaTimePickerColumnCell from '../VaTimePickerColumnCell.vue'\nimport { defineComponent, nextTick, shallowRef, watch, onMounted, PropType, computed } from 'vue'\n\nimport { useElementBackground, useSyncProp, useFocus, useFocusEmits, useTextColor } from '../../../../composables'\nimport debounce from 'lodash/debounce.js'\n\nexport default defineComponent({\n  name: 'VaTimePickerColumn',\n\n  components: { VaTimePickerColumnCell },\n\n  props: {\n    items: { type: Array as PropType<string[] | number[]>, default: () => [] },\n    activeItemIndex: { type: Number, default: 0 },\n    cellHeight: { type: Number, default: 30 },\n  },\n\n  emits: ['item-selected', 'update:activeItemIndex', ...useFocusEmits],\n\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n    const { focus, blur } = useFocus(rootElement, emit)\n    const [syncActiveItemIndex] = useSyncProp('activeItemIndex', props, emit)\n\n    watch(syncActiveItemIndex, (newVal) => { scrollTo(newVal) })\n\n    onMounted(() => scrollTo(syncActiveItemIndex.value, false))\n\n    const scrollTo = (index: number, animated = true) => {\n      nextTick(() => {\n        // see: https://github.com/vuejs/vue-test-utils/issues/319#issuecomment-354667621\n        rootElement.value?.scrollTo?.({\n          behavior: animated ? 'smooth' : 'auto',\n          top: index * props.cellHeight,\n        })\n      })\n    }\n\n    const makeActiveByIndex = (index: number) => {\n      syncActiveItemIndex.value = index\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActiveNext = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value + (times || 1)) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const makeActivePrev = (times?: number) => {\n      syncActiveItemIndex.value = (syncActiveItemIndex.value - (times || 1) + props.items.length) % props.items.length\n      nextTick(() => scrollTo(syncActiveItemIndex.value))\n    }\n\n    const onCellClick = (index: number) => {\n      syncActiveItemIndex.value = index\n    }\n\n    const formatCell = (n: number | string): string => {\n      if (!Number.isInteger(n)) { return n as string }\n\n      return Number(n) < 10 ? `0${n}` : `${n}`\n    }\n\n    const { background } = useElementBackground(rootElement)\n    const { textColorComputed } = useTextColor(background)\n\n    const styleComputed = computed(() => ({\n      color: textColorComputed.value,\n    }))\n    const getIndex = () => {\n      const scrollTop = rootElement.value!.scrollTop\n      const calculatedIndex = Math.max(\n        (scrollTop - scrollTop % props.cellHeight) / props.cellHeight,\n        scrollTop / props.cellHeight,\n      )\n\n      if (calculatedIndex >= props.items.length) {\n        return props.items.length - 1\n      }\n      if (calculatedIndex < 0) {\n        return 0\n      }\n\n      if (syncActiveItemIndex.value * props.cellHeight < scrollTop) {\n        return Math.ceil(calculatedIndex)\n      } else if (syncActiveItemIndex.value * props.cellHeight > scrollTop) {\n        return Math.floor(calculatedIndex)\n      } else {\n        return Math.round(calculatedIndex)\n      }\n    }\n\n    const onScroll = debounce(() => {\n      if (rootElement.value && syncActiveItemIndex.value !== -1) {\n        syncActiveItemIndex.value = getIndex()\n      }\n    }, 200)\n\n    return {\n      syncActiveItemIndex,\n      rootElement,\n\n      makeActiveNext,\n      makeActivePrev,\n      makeActiveByIndex,\n      onScroll,\n\n      onCellClick,\n      formatCell,\n\n      styleComputed,\n\n      focus,\n      blur,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import 'variables';\n@import '../../../../styles/resources';\n\n@mixin hiddenYScroll {\n  overflow-y: scroll;\n  -ms-overflow-style: none;  /* IE and Edge */\n  scrollbar-width: none;  /* Firefox */\n  &::-webkit-scrollbar { /* WebKit */\n    display: none;\n  }\n}\n\n.va-time-picker-column {\n  @include hiddenYScroll();\n\n  height: 100%;\n  border-right: var(--va-time-picker-column-border-right);\n\n  &::before,\n  &::after {\n    content: \"\";\n    display: block;\n    height: var(--va-time-picker-column-gap-height);\n    width: 100%;\n  }\n\n  &:last-child {\n    border-right: 0;\n  }\n\n  .va-time-picker-cell {\n    height: var(--va-time-picker-cell-height);\n    line-height: var(--va-time-picker-cell-height);\n    width: var(--va-time-picker-cell-width);\n    text-align: center;\n    cursor: var(--va-time-picker-cell-cursor);\n    user-select: none;\n\n    &--active {\n      position: relative;\n      color: var(--va-time-picker-cell-active-color);\n      z-index: 0;\n\n      &::before {\n        background: var(--va-time-picker-cell-active-background);\n        position: absolute;\n        height: 100%;\n        width: 100%;\n        left: 0;\n        right: 0;\n        content: '';\n        z-index: -1;\n        opacity: var(--va-time-picker-cell-active-background-opacity);\n      }\n    }\n\n    &:hover {\n      background: var(--va-time-picker-cell-background-color-hover);\n    }\n  }\n\n  &:focus-visible {\n    outline: none;\n\n    .va-time-picker-cell {\n      &--active {\n        @include focus-outline($radius: 4px, $offset: -2px);\n      }\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;;EA0BQ,MAAAA,iCAAA,GAAAC,gBAAA;SAvBJC,SAAA,CAAY,GAAAC,kBAAA;IACZC,GAAA,EAAK;IACJC,QAAA,EAAO;IAAAC,KAAA;IAAAC,SAAA,G,2DAEkBC,IAAA,CAAcC,cAAA,sCAAAC,MAAA,QAAAA,MAAA,MAAAC,QAAA,CAAAC,aAAA,CAAAC,MAAA,IAAAL,IAAA,CAAAC,cAAA,wCACvCC,MAAA,CAAK,OAAAA,MAAA,CAAE,CAAa,IAAAC,QAAA,CAAAC,aAAA,CAAAC,MAAA,IAAAL,IAAA,CAAAM,cAAA;IAAAC,KAAA,EAAAC,cAAA,CAErBR,IAAA,CAeyBS,aAAA;EAAA,KAAAf,SAAA,CAdc,IAAI,GAAAC,kBAAA,CAAAe,QAAA,QAAAC,UAAA,CAAAX,IAAA,CAAAY,KAAA,GAAAC,IAAA,EAAAC,KAAA;wBAChBC,WAAA,CAAAvB,iCAAA;MAAAwB,GAAA,EAAAH,IAAA;MAEJI,eAAA,EAAAjB,IAAA,CAAAkB,QAAA;MAAAC,kBAAA,EAAAnB,IAAA,CAAAkB,QAAA;MAUfE,mBAAA,EAAApB,IAAA,CAAAkB;IAAA;MAPCG,OAAA,EAAAC,OAAA,QAAAC,kBAAA,CAEC,OAAE;QAAAzB,KAAA,EAAA0B,cAAA;UAAA,+BAAAV,KAAA,KAAAd,IAAA,CAAAyB,MAAA,CAAAC;QAAA;QAERC,OAAA,EAEOtB,MAAA,IAAAL,IAAA,CAAA4B,WAAA,CAAAd,KAAA;MAAA,IAAAe,UAAA,CAAA7B,IAAA,CAAA8B,MAAA,UAAAC,cAAA,CAAAC,kBAAA;QAAAnB,IAAA;QAAAC,KAAA;QAAAY,eAAA,EAAA1B,IAAA,CAAA0B,eAAA;QAAAd,KAAA,EAAAZ,IAAA,CAAAY,KAAA;QAAAqB,aAAA,EAAAjC,IAAA,CAAAkC,UAAA,CAAArB,IAAA;MAAA,Y"},"metadata":{},"sourceType":"module","externalDependencies":[]}