{"ast":null,"code":"import { _ as _sfc_main } from \"./VaBacktop.vue_vue_type_script_lang-eb1618ca.mjs\";\nimport { resolveComponent, openBlock, createElementBlock, normalizeStyle, withKeys, withModifiers, renderSlot, createVNode, createCommentVNode } from \"vue\";\nimport { _ as _export_sfc } from \"../../../plugin-vue_export-helper-cc2b3d55.mjs\";\nconst VaBacktop_vue_vue_type_style_index_0_lang = \"\";\nconst _hoisted_1 = [\"aria-label\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_va_button = resolveComponent(\"va-button\");\n  return _ctx.visible ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    class: \"va-backtop\",\n    role: \"button\",\n    \"aria-label\": _ctx.tp(_ctx.$props.ariaLabel),\n    style: normalizeStyle(_ctx.computedStyle),\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.scrollToTop && _ctx.scrollToTop(...args)),\n    onKeydown: _cache[1] || (_cache[1] = withKeys(withModifiers((...args) => _ctx.scrollToTop && _ctx.scrollToTop(...args), [\"stop\"]), [\"enter\"]))\n  }, [renderSlot(_ctx.$slots, \"default\", {}, () => [createVNode(_component_va_button, {\n    \"aria-hidden\": \"true\",\n    icon: \"va-arrow-up\",\n    color: _ctx.color\n  }, null, 8, [\"color\"])])], 44, _hoisted_1)) : createCommentVNode(\"\", true);\n}\nconst _VaBacktop = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { _VaBacktop as _ };","map":{"version":3,"names":["_component_va_button","resolveComponent","createElementBlock","key","class","role","_ctx","tp","$props","ariaLabel","style","normalizeStyle","computedStyle","onClick","_cache","args","scrollToTop","onKeydown","withKeys","withModifiers","renderSlot","$slots","createVNode","icon","color"],"sources":["../../../../../src/components/va-backtop/VaBacktop.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    role=\"button\"\n    :aria-label=\"tp($props.ariaLabel)\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop\"\n    @keydown.enter.stop=\"scrollToTop\"\n  >\n    <slot>\n      <va-button\n        aria-hidden=\"true\"\n        icon=\"va-arrow-up\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount } from 'vue'\nimport { useComponentPresetProp, useTranslation } from '../../composables'\nimport { VaButton } from '../va-button'\nimport { isServer } from '../../utils/ssr'\nimport { warn } from '../../utils/console'\n\nexport default defineComponent({\n  name: 'VaBacktop',\n  components: { VaButton },\n  props: {\n    ...useComponentPresetProp,\n    target: {\n      type: [Object, String] as PropType<Element | string | undefined>,\n      default: undefined,\n    },\n    visibilityHeight: { type: Number, default: 300 },\n    speed: { type: Number, default: 50 },\n    verticalOffset: { type: String, default: '1rem' },\n    horizontalOffset: { type: String, default: '1rem' },\n    color: { type: String, default: '' },\n    horizontalPosition: {\n      type: String as PropType<'right' | 'left'>,\n      default: 'right',\n      validator: (value: string) => ['right', 'left'].includes(value),\n    },\n    verticalPosition: {\n      type: String as PropType<'bottom' | 'top'>,\n      default: 'bottom',\n      validator: (value: string) => ['bottom', 'top'].includes(value),\n    },\n    ariaLabel: { type: String, default: '$t:backToTop' },\n  },\n  setup (props) {\n    const targetScrollValue = ref(0)\n\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset,\n    }))\n\n    let targetElement: Element | Window\n\n    const getTargetElement = (): Element | Window => {\n      if (!props.target) {\n        return window\n      }\n      if (typeof props.target === 'string') {\n        const target = document.querySelector(props.target) as Element\n        if (!target) {\n          warn(`Target element [${props.target}] is not found, falling back to window.`)\n          return window\n        }\n        return target\n      }\n      return props.target as Element\n    }\n\n    const scrolled = ref(false)\n    const interval = ref(0)\n    const scrollToTop = () => {\n      if (scrolled.value) { return }\n\n      scrolled.value = true\n\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        })\n\n        return\n      }\n\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value)\n            scrolled.value = false\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed)\n            targetElement.scrollTo(0, next)\n          }\n        }\n      }, 15)\n    }\n\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window\n        ? targetElement.scrollY\n        : targetElement.scrollTop\n    }\n\n    const server = isServer()\n\n    const visible = computed(() => {\n      if (server) {\n        return false\n      }\n      return targetScrollValue.value > props.visibilityHeight\n    })\n\n    if (!server) {\n      onMounted(() => {\n        targetElement = getTargetElement()\n        targetElement.addEventListener('scroll', handleScroll, true)\n      })\n      onBeforeUnmount(() => targetElement?.removeEventListener('scroll', handleScroll))\n    }\n\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n      ...useTranslation(),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n  font-family: var(--va-font-family);\n}\n</style>\n"],"mappings":";;;;;;EAEiB,MAAAA,oBAAA,GAAAC,gBAAA;sCACKC,kBAAA;IAClBC,GAAA,EAAI;IACHC,KAAA;IACAC,IAAA,EAAK;IACL,cAAKC,IAAA,CAAAC,EAAA,CAAAD,IAAA,CAAAE,MAAA,CAAAC,SAAA;IACLC,KAAA,EAAOC,cAAA,CAAAL,IAAA,CAAAM,aAAA;IAAAC,OAAA,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAAT,IAAA,CAAAU,WAAA,IAAAV,IAAA,CAAAU,WAAA,IAAAD,IAAA;IAERE,SAAA,EAMOH,MAAA,QAAAA,MAAA,MAAAI,QAAA,CAAAC,aAAA,KAAAJ,IAAA,KAAAT,IAAA,CAAAU,WAAA,IAAAV,IAAA,CAAAU,WAAA,IAAAD,IAAA;EAAA,IAJHK,UAAA,CAAAd,IAAA,CAAWe,MAAA,EAAO,sBAAAC,WAAA,CACbtB,oBAAA,EAAa;IACjB,eAAO;IAAAuB,IAAA;IAAAC,KAAA,EAAAlB,IAAA,CAAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}