{"ast":null,"code":"import { ref, computed, watch, onBeforeUnmount, unref } from \"vue\";\nimport { e as extractHTMLElement } from \"./useHTMLElement-beee793a.mjs\";\nconst useIntersectionObserver = (cb, options = ref({}), target = ref([]), enabled = true) => {\n  const observer = ref();\n  const disconnectObserver = () => {\n    var _a;\n    (_a = observer.value) == null ? void 0 : _a.disconnect();\n  };\n  const observeTarget = target2 => {\n    var _a;\n    const disclosedTarget = extractHTMLElement(unref(target2));\n    disclosedTarget && ((_a = observer.value) == null ? void 0 : _a.observe(disclosedTarget));\n  };\n  const observeAll = targets => {\n    targets.forEach(observeTarget);\n  };\n  const initObserver = () => {\n    observer.value = new IntersectionObserver(cb, options.value);\n  };\n  const isIntersectionDisabled = computed(() => !enabled || !(typeof window !== \"undefined\" && \"IntersectionObserver\" in window));\n  watch([target, options], ([newTarget]) => {\n    if (isIntersectionDisabled.value) {\n      return;\n    }\n    disconnectObserver();\n    if (!newTarget) {\n      return;\n    }\n    initObserver();\n    Array.isArray(newTarget) ? observeAll(newTarget) : observeTarget(newTarget);\n  }, {\n    immediate: true\n  });\n  onBeforeUnmount(disconnectObserver);\n  return {\n    isIntersectionDisabled\n  };\n};\nexport { useIntersectionObserver as u };","map":{"version":3,"names":["useIntersectionObserver","cb","options","ref","target","enabled","observer","disconnectObserver","_a","value","disconnect","observeTarget","target2","disclosedTarget","extractHTMLElement","unref","observe","observeAll","targets","forEach","initObserver","IntersectionObserver","isIntersectionDisabled","computed","window","watch","newTarget","Array","isArray","immediate","onBeforeUnmount"],"sources":["../../../../src/composables/useIntersectionObserver.ts"],"sourcesContent":["import { ref, unref, computed, watch, onBeforeUnmount, type Ref } from 'vue'\n\nimport { extractHTMLElement } from './useHTMLElement'\n\ntype MaybeRef<T> = T | Ref<T>\n\nexport const useIntersectionObserver = <T extends HTMLElement | undefined>(\n  cb: (entries: IntersectionObserverEntry[], observer: IntersectionObserver) => void,\n  options: Ref<IntersectionObserverInit> = ref({}),\n  target: Ref<MaybeRef<T>[] | T> = ref([]),\n  enabled = true,\n) => {\n  const observer = ref<IntersectionObserver>()\n\n  const disconnectObserver = () => {\n    observer.value?.disconnect()\n  }\n\n  const observeTarget = (target: MaybeRef<T>) => {\n    const disclosedTarget = extractHTMLElement(unref(target))\n    disclosedTarget && observer.value?.observe(disclosedTarget)\n  }\n\n  const observeAll = (targets: MaybeRef<T>[]) => {\n    targets.forEach(observeTarget)\n  }\n\n  const initObserver = () => {\n    observer.value = new IntersectionObserver(cb, options.value)\n  }\n\n  const isIntersectionDisabled = computed(() => !enabled || !(typeof window !== 'undefined' && 'IntersectionObserver' in window))\n\n  watch([target, options], ([newTarget]) => {\n    if (isIntersectionDisabled.value) { return }\n\n    disconnectObserver()\n\n    if (!newTarget) { return }\n\n    initObserver()\n\n    Array.isArray(newTarget) ? observeAll(newTarget) : observeTarget(newTarget)\n  }, { immediate: true })\n\n  onBeforeUnmount(disconnectObserver)\n\n  return { isIntersectionDisabled }\n}\n"],"mappings":";;AAMO,MAAMA,uBAAA,GAA0BA,CACrCC,EAAA,EACAC,OAAA,GAAyCC,GAAA,CAAI,CAAE,IAC/CC,MAAA,GAAiCD,GAAA,CAAI,EAAE,GACvCE,OAAA,GAAU,SACP;EACH,MAAMC,QAAA,GAAWH,GAAA;EAEjB,MAAMI,kBAAA,GAAqBA,CAAA,KAAM;;IAC/B,CAAAC,EAAA,GAAAF,QAAA,CAASG,KAAA,KAAT,gBAAAD,EAAA,CAAgBE,UAAA;EAAW;EAGvB,MAAAC,aAAA,GAAiBC,OAAA,IAAwB;;IAC7C,MAAMC,eAAA,GAAkBC,kBAAA,CAAmBC,KAAA,CAAMH,OAAM,CAAC;IACrCC,eAAA,MAAAL,EAAA,GAAAF,QAAA,CAASG,KAAA,KAAT,gBAAAD,EAAA,CAAgBQ,OAAA,CAAQH,eAAA;EAAe;EAGtD,MAAAI,UAAA,GAAcC,OAAA,IAA2B;IAC7CA,OAAA,CAAQC,OAAA,CAAQR,aAAa;EAAA;EAG/B,MAAMS,YAAA,GAAeA,CAAA,KAAM;IACzBd,QAAA,CAASG,KAAA,GAAQ,IAAIY,oBAAA,CAAqBpB,EAAA,EAAIC,OAAA,CAAQO,KAAK;EAAA;EAGvD,MAAAa,sBAAA,GAAyBC,QAAA,CAAS,MAAM,CAAClB,OAAA,IAAW,EAAE,OAAOmB,MAAA,KAAW,eAAe,0BAA0BA,MAAA,CAAO;EAE9HC,KAAA,CAAM,CAACrB,MAAA,EAAQF,OAAO,GAAG,CAAC,CAACwB,SAAS,MAAM;IACxC,IAAIJ,sBAAA,CAAuBb,KAAA,EAAO;MAAE;IAAO;IAExBF,kBAAA;IAEnB,IAAI,CAACmB,SAAA,EAAW;MAAE;IAAO;IAEZN,YAAA;IAEbO,KAAA,CAAMC,OAAA,CAAQF,SAAS,IAAIT,UAAA,CAAWS,SAAS,IAAIf,aAAA,CAAce,SAAS;EAAA,GACzE;IAAEG,SAAA,EAAW;EAAA,CAAM;EAEtBC,eAAA,CAAgBvB,kBAAkB;EAElC,OAAO;IAAEe;EAAuB;AAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}