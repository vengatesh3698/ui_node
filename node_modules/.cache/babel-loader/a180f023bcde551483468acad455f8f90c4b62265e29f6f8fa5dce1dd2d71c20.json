{"ast":null,"code":"import { defineComponent, shallowRef, ref, computed, watch } from \"vue\";\nimport { R as RatingValue } from \"../../types-7212ca12.mjs\";\nimport { V as VaIcon } from \"../../../va-icon/index-0ebbc0f2.mjs\";\nimport { u as useSyncProp } from \"../../../../composables/useSyncProp-326abeda.mjs\";\nimport { u as useColors } from \"../../../../composables/useColors-f23d24ff.mjs\";\nconst _sfc_main = defineComponent({\n  name: \"VaRatingItem\",\n  components: {\n    VaIcon\n  },\n  props: {\n    modelValue: {\n      type: Number,\n      default: 0\n    },\n    icon: {\n      type: String,\n      default: \"star\"\n    },\n    halfIcon: {\n      type: String,\n      default: \"star_half\"\n    },\n    emptyIcon: {\n      type: String,\n      default: \"star_outline\"\n    },\n    halves: {\n      type: Boolean,\n      default: false\n    },\n    hover: {\n      type: Boolean,\n      default: false\n    },\n    tabindex: {\n      type: [String, Number],\n      default: 0\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: [String, Number],\n      default: \"medium\"\n    },\n    unselectedColor: {\n      type: String\n    },\n    color: {\n      type: String,\n      default: \"primary\"\n    }\n  },\n  emits: [\"update:modelValue\", \"click\", \"hover\"],\n  setup(props, {\n    emit\n  }) {\n    const rootEl = shallowRef();\n    const [modelValue] = useSyncProp(\"modelValue\", props, emit, RatingValue.EMPTY);\n    const hoveredValue = ref(null);\n    const visibleValue = computed(() => {\n      if (props.hover && !props.disabled && !props.readonly) {\n        return hoveredValue.value || modelValue.value;\n      }\n      return modelValue.value;\n    });\n    const {\n      getColor\n    } = useColors();\n    const computedColor = computed(() => getColor(props.unselectedColor && visibleValue.value === RatingValue.EMPTY ? props.unselectedColor : props.color));\n    const onMouseMove = ev => {\n      if (!rootEl.value) {\n        return;\n      }\n      const {\n        offsetX\n      } = ev;\n      const iconWidth = rootEl.value.clientWidth;\n      if (props.halves) {\n        hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL;\n      } else {\n        hoveredValue.value = RatingValue.FULL;\n      }\n    };\n    const onMouseLeave = () => {\n      hoveredValue.value = null;\n    };\n    const onEnter = () => {\n      modelValue.value = 1;\n    };\n    const onClick = () => {\n      modelValue.value = hoveredValue.value || RatingValue.FULL;\n      emit(\"click\", hoveredValue.value || RatingValue.FULL);\n    };\n    watch(hoveredValue, () => emit(\"hover\", hoveredValue.value || RatingValue.EMPTY));\n    return {\n      computedColor,\n      rootEl,\n      onEnter,\n      onClick,\n      onMouseMove,\n      onMouseLeave,\n      visibleValue,\n      computedIconName: computed(() => {\n        if (props.halves && visibleValue.value === RatingValue.HALF) {\n          return props.halfIcon;\n        }\n        if (visibleValue.value === RatingValue.EMPTY) {\n          return props.emptyIcon;\n        }\n        return props.icon;\n      }),\n      tabIndexComputed: computed(() => props.disabled ? -1 : props.tabindex)\n    };\n  }\n});\nexport { _sfc_main as _ };\nimport '../../../../../VaRatingItem.css';","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","VaIcon","props","modelValue","type","Number","default","icon","String","halfIcon","emptyIcon","halves","Boolean","hover","tabindex","disabled","readonly","size","unselectedColor","color","emits","setup","emit","rootEl","shallowRef","useSyncProp","RatingValue","EMPTY","hoveredValue","ref","visibleValue","computed","value","getColor","useColors","computedColor","onMouseMove","ev","offsetX","iconWidth","clientWidth","HALF","FULL","onMouseLeave","onEnter","onClick","watch","computedIconName","tabIndexComputed"],"sources":["../../../../../../../src/components/va-rating/components/VaRatingItem/VaRatingItem.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"rootEl\"\n    role=\"button\"\n    class=\"va-rating-item\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.enter=\"onClick\"\n    @keydown.space.prevent=\"onClick\"\n    @mousemove=\"onMouseMove\"\n    @mouseleave=\"onMouseLeave\"\n    @click=\"onClick\"\n  >\n    <slot v-bind=\"{ value: visibleValue, onClick }\">\n      <va-icon\n        class=\"va-rating-item__wrapper\"\n        tabindex=\"-1\"\n        tag=\"button\"\n        :name=\"computedIconName\"\n        :size=\"$props.size\"\n        :color=\"computedColor\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, shallowRef, watch } from 'vue'\n\nimport { useColors, useSyncProp } from '../../../../composables'\n\nimport { RatingValue } from '../../types'\n\nimport { VaIcon } from '../../../va-icon'\n\nexport default defineComponent({\n  name: 'VaRatingItem',\n\n  components: { VaIcon },\n\n  props: {\n    modelValue: { type: Number, default: 0 },\n    icon: { type: String, default: 'star' },\n    halfIcon: { type: String, default: 'star_half' },\n    emptyIcon: { type: String, default: 'star_outline' },\n    halves: { type: Boolean, default: false },\n    hover: { type: Boolean, default: false },\n    tabindex: { type: [String, Number], default: 0 },\n    disabled: { type: Boolean, default: false },\n    readonly: { type: Boolean, default: false },\n    size: { type: [String, Number], default: 'medium' },\n    unselectedColor: { type: String },\n    color: { type: String, default: 'primary' },\n  },\n\n  emits: ['update:modelValue', 'click', 'hover'],\n\n  setup (props, { emit }) {\n    const rootEl = shallowRef<HTMLElement>()\n\n    const [modelValue] = useSyncProp('modelValue', props, emit, RatingValue.EMPTY)\n    const hoveredValue = ref<number | null>(null)\n\n    const visibleValue = computed(() => {\n      if (props.hover && !props.disabled && !props.readonly) {\n        return hoveredValue.value || modelValue.value\n      }\n      return modelValue.value\n    })\n\n    const { getColor } = useColors()\n    const computedColor = computed(() => getColor(\n      props.unselectedColor && visibleValue.value === RatingValue.EMPTY\n        ? props.unselectedColor\n        : props.color,\n    ))\n\n    const onMouseMove = (ev: MouseEvent) => {\n      if (!rootEl.value) { return }\n      const { offsetX } = ev\n      const iconWidth = rootEl.value.clientWidth\n\n      if (props.halves) {\n        hoveredValue.value = offsetX / iconWidth <= RatingValue.HALF ? RatingValue.HALF : RatingValue.FULL\n      } else {\n        hoveredValue.value = RatingValue.FULL\n      }\n    }\n\n    const onMouseLeave = () => {\n      hoveredValue.value = null\n    }\n\n    const onEnter = () => {\n      modelValue.value = 1\n    }\n\n    const onClick = () => {\n      modelValue.value = hoveredValue.value || RatingValue.FULL\n      emit('click', hoveredValue.value || RatingValue.FULL)\n    }\n\n    watch(hoveredValue, () => emit('hover', hoveredValue.value || RatingValue.EMPTY))\n\n    return {\n      computedColor,\n      rootEl,\n      onEnter,\n      onClick,\n      onMouseMove,\n      onMouseLeave,\n      visibleValue,\n\n      computedIconName: computed(() => {\n        if (props.halves && visibleValue.value === RatingValue.HALF) {\n          return props.halfIcon\n        }\n        if (visibleValue.value === RatingValue.EMPTY) {\n          return props.emptyIcon\n        }\n\n        return props.icon\n      }),\n      tabIndexComputed: computed(() => props.disabled ? -1 : props.tabindex),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources\";\n\n.va-rating-item {\n  display: inline-block;\n\n  @include keyboard-focus-outline($radius: 2px);\n\n  &__wrapper {\n    @include normalize-button();\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}