{"ast":null,"code":"import { defineComponent, watch, computed } from \"vue\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { a as useLocalConfigProvider } from \"../../composables/useLocalConfig-624e8425.mjs\";\nimport { u as useFormParent } from \"../../composables/useForm/useFormParent-7e5be1b3.mjs\";\nconst props = {\n  stateful: true\n};\nconst statefulConfig = {\n  VaInput: props,\n  VaSelect: props,\n  VaCheckbox: props,\n  VaRadio: props,\n  VaDatePicker: props,\n  VaTimePicker: props,\n  VaColorPicker: props,\n  VaSlider: props,\n  VaSwitch: props,\n  VaFileUpload: props,\n  VaRating: props,\n  VaDateInput: props,\n  VaTimeInput: props\n};\nconst _sfc_main = defineComponent({\n  name: \"VaForm\",\n  props: {\n    ...useComponentPresetProp,\n    autofocus: {\n      type: Boolean,\n      default: false\n    },\n    immediate: {\n      type: Boolean,\n      default: false\n    },\n    tag: {\n      type: String,\n      default: \"div\"\n    },\n    trigger: {\n      type: String,\n      default: \"blur\"\n    },\n    modelValue: {\n      type: Boolean,\n      default: true\n    },\n    hideErrors: {\n      type: Boolean,\n      default: false\n    },\n    hideErrorMessages: {\n      type: Boolean,\n      default: false\n    },\n    hideLoading: {\n      type: Boolean,\n      default: false\n    },\n    stateful: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props2, {\n    emit\n  }) {\n    const context = useFormParent(props2);\n    watch(context.isValid, value => {\n      emit(\"update:modelValue\", value);\n    });\n    watch(() => props2.autofocus, value => {\n      if (value) {\n        context.focus();\n      }\n    }, {\n      immediate: true\n    });\n    watch(context.fields, newVal => {\n      if (newVal.length && props2.immediate) {\n        context.validate();\n      }\n    }, {\n      immediate: true\n    });\n    useLocalConfigProvider(computed(() => {\n      if (!props2.stateful) {\n        return {};\n      }\n      return statefulConfig;\n    }));\n    return {\n      ...context,\n      context\n    };\n  }\n});\nexport { _sfc_main as _ };\nimport '../../../VaForm.css';","map":{"version":3,"names":["props","stateful","statefulConfig","VaInput","VaSelect","VaCheckbox","VaRadio","VaDatePicker","VaTimePicker","VaColorPicker","VaSlider","VaSwitch","VaFileUpload","VaRating","VaDateInput","VaTimeInput","_sfc_main","defineComponent","name","useComponentPresetProp","autofocus","type","Boolean","default","immediate","tag","String","trigger","modelValue","hideErrors","hideErrorMessages","hideLoading","emits","setup","props2","emit","context","useFormParent","watch","isValid","value","focus","fields","newVal","length","validate","useLocalConfigProvider","computed"],"sources":["../../../../../src/components/va-form/VaForm.vue"],"sourcesContent":["<template>\n  <component\n    class=\"va-form\"\n    :is=\"tag\"\n    v-bind=\"$attrs\"\n  >\n    <slot v-bind=\"{ isValid, validate }\" />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, watch, PropType, computed } from 'vue'\n\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\nimport { useFormParent } from '../../composables/useForm'\nimport { useLocalConfigProvider } from '../../composables/useLocalConfig'\n\nconst props = { stateful: true }\n\nconst statefulConfig = {\n  VaInput: props,\n  VaSelect: props,\n  VaCheckbox: props,\n  VaRadio: props,\n  VaDatePicker: props,\n  VaTimePicker: props,\n  VaColorPicker: props,\n  VaSlider: props,\n  VaSwitch: props,\n  VaFileUpload: props,\n  VaRating: props,\n  VaDateInput: props,\n  VaTimeInput: props,\n}\n\nexport default defineComponent({\n  name: 'VaForm',\n\n  props: {\n    ...useComponentPresetProp,\n    autofocus: { type: Boolean, default: false },\n    immediate: { type: Boolean, default: false },\n    tag: { type: String, default: 'div' },\n    trigger: { type: String as PropType<'blur' | 'change'>, default: 'blur' },\n    modelValue: { type: Boolean, default: true },\n    hideErrors: { type: Boolean, default: false },\n    hideErrorMessages: { type: Boolean, default: false },\n    hideLoading: { type: Boolean, default: false },\n    stateful: { type: Boolean, default: false },\n  },\n\n  emits: ['update:modelValue'],\n\n  setup (props, { emit }) {\n    const context = useFormParent(props)\n\n    watch(context.isValid, (value) => {\n      emit('update:modelValue', value)\n    })\n\n    watch(() => props.autofocus, (value) => {\n      if (value) {\n        context.focus()\n      }\n    }, { immediate: true })\n\n    watch(context.fields, (newVal) => {\n      if (newVal.length && props.immediate) {\n        context.validate()\n      }\n    }, { immediate: true })\n\n    useLocalConfigProvider(computed(() => {\n      if (!props.stateful) { return {} }\n\n      return statefulConfig\n    }))\n\n    return {\n      ...context,\n      context: context,\n    }\n  },\n})\n</script>\n\n<style lang='scss'>\n.va-form {\n  font-family: var(--va-font-family);\n}\n</style>\n"],"mappings":";;;;AAiBA,MAAMA,KAAA,GAAQ;EAAEC,QAAA,EAAU;AAAA;AAE1B,MAAMC,cAAA,GAAiB;EACrBC,OAAA,EAASH,KAAA;EACTI,QAAA,EAAUJ,KAAA;EACVK,UAAA,EAAYL,KAAA;EACZM,OAAA,EAASN,KAAA;EACTO,YAAA,EAAcP,KAAA;EACdQ,YAAA,EAAcR,KAAA;EACdS,aAAA,EAAeT,KAAA;EACfU,QAAA,EAAUV,KAAA;EACVW,QAAA,EAAUX,KAAA;EACVY,YAAA,EAAcZ,KAAA;EACda,QAAA,EAAUb,KAAA;EACVc,WAAA,EAAad,KAAA;EACbe,WAAA,EAAaf;AACf;AAEA,MAAAgB,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EAENlB,KAAA,EAAO;IACL,GAAGmB,sBAAA;IACHC,SAAA,EAAW;MAAEC,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC3CC,SAAA,EAAW;MAAEH,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC3CE,GAAA,EAAK;MAAEJ,IAAA,EAAMK,MAAA;MAAQH,OAAA,EAAS;IAAM;IACpCI,OAAA,EAAS;MAAEN,IAAA,EAAMK,MAAA;MAAuCH,OAAA,EAAS;IAAO;IACxEK,UAAA,EAAY;MAAEP,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAK;IAC3CM,UAAA,EAAY;MAAER,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC5CO,iBAAA,EAAmB;MAAET,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IACnDQ,WAAA,EAAa;MAAEV,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;IAC7CtB,QAAA,EAAU;MAAEoB,IAAA,EAAMC,OAAA;MAASC,OAAA,EAAS;IAAM;EAC5C;EAEAS,KAAA,EAAO,CAAC,mBAAmB;EAE3BC,MAAOC,MAAA,EAAO;IAAEC;EAAA,GAAQ;IAChB,MAAAC,OAAA,GAAUC,aAAA,CAAcH,MAAK;IAE7BI,KAAA,CAAAF,OAAA,CAAQG,OAAA,EAAUC,KAAA,IAAU;MAChCL,IAAA,CAAK,qBAAqBK,KAAK;IAAA,CAChC;IAEDF,KAAA,CAAM,MAAMJ,MAAA,CAAMd,SAAA,EAAYoB,KAAA,IAAU;MACtC,IAAIA,KAAA,EAAO;QACTJ,OAAA,CAAQK,KAAA,CAAM;MAChB;IAAA,GACC;MAAEjB,SAAA,EAAW;IAAA,CAAM;IAEhBc,KAAA,CAAAF,OAAA,CAAQM,MAAA,EAASC,MAAA,IAAW;MAC5B,IAAAA,MAAA,CAAOC,MAAA,IAAUV,MAAA,CAAMV,SAAA,EAAW;QACpCY,OAAA,CAAQS,QAAA,CAAS;MACnB;IAAA,GACC;MAAErB,SAAA,EAAW;IAAA,CAAM;IAEtBsB,sBAAA,CAAuBC,QAAA,CAAS,MAAM;MAChC,KAACb,MAAA,CAAMjC,QAAA,EAAU;QAAE,OAAO;MAAG;MAE1B,OAAAC,cAAA;IACR,EAAC;IAEK;MACL,GAAGkC,OAAA;MACHA;IAAA;EAEJ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}