{"ast":null,"code":"import { defineComponent, ref, computed, onMounted, onBeforeUnmount } from \"vue\";\nimport { V as VaButton } from \"../va-button/index-b0a9ef70.mjs\";\nimport { i as isServer } from \"../../utils/ssr-fd33979c.mjs\";\nimport { w as warn } from \"../../utils/console-42c8e8cc.mjs\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset-0dfbd395.mjs\";\nimport { u as useTranslation } from \"../../composables/useTranslation-acf7d88d.mjs\";\nconst _sfc_main = defineComponent({\n  name: \"VaBacktop\",\n  components: {\n    VaButton\n  },\n  props: {\n    ...useComponentPresetProp,\n    target: {\n      type: [Object, String],\n      default: void 0\n    },\n    visibilityHeight: {\n      type: Number,\n      default: 300\n    },\n    speed: {\n      type: Number,\n      default: 50\n    },\n    verticalOffset: {\n      type: String,\n      default: \"1rem\"\n    },\n    horizontalOffset: {\n      type: String,\n      default: \"1rem\"\n    },\n    color: {\n      type: String,\n      default: \"\"\n    },\n    horizontalPosition: {\n      type: String,\n      default: \"right\",\n      validator: value => [\"right\", \"left\"].includes(value)\n    },\n    verticalPosition: {\n      type: String,\n      default: \"bottom\",\n      validator: value => [\"bottom\", \"top\"].includes(value)\n    },\n    ariaLabel: {\n      type: String,\n      default: \"$t:backToTop\"\n    }\n  },\n  setup(props) {\n    const targetScrollValue = ref(0);\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset\n    }));\n    let targetElement;\n    const getTargetElement = () => {\n      if (!props.target) {\n        return window;\n      }\n      if (typeof props.target === \"string\") {\n        const target = document.querySelector(props.target);\n        if (!target) {\n          warn(`Target element [${props.target}] is not found, falling back to window.`);\n          return window;\n        }\n        return target;\n      }\n      return props.target;\n    };\n    const scrolled = ref(false);\n    const interval = ref(0);\n    const scrollToTop = () => {\n      if (scrolled.value) {\n        return;\n      }\n      scrolled.value = true;\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: \"smooth\"\n        });\n        return;\n      }\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value);\n            scrolled.value = false;\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed);\n            targetElement.scrollTo(0, next);\n          }\n        }\n      }, 15);\n    };\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window ? targetElement.scrollY : targetElement.scrollTop;\n    };\n    const server = isServer();\n    const visible = computed(() => {\n      if (server) {\n        return false;\n      }\n      return targetScrollValue.value > props.visibilityHeight;\n    });\n    if (!server) {\n      onMounted(() => {\n        targetElement = getTargetElement();\n        targetElement.addEventListener(\"scroll\", handleScroll, true);\n      });\n      onBeforeUnmount(() => targetElement == null ? void 0 : targetElement.removeEventListener(\"scroll\", handleScroll));\n    }\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n      ...useTranslation()\n    };\n  }\n});\nexport { _sfc_main as _ };\nimport '../../../VaBacktop.css';","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","VaButton","props","useComponentPresetProp","target","type","Object","String","default","visibilityHeight","Number","speed","verticalOffset","horizontalOffset","color","horizontalPosition","validator","value","includes","verticalPosition","ariaLabel","setup","targetScrollValue","ref","computedStyle","computed","targetElement","getTargetElement","window","document","querySelector","warn","scrolled","interval","scrollToTop","Window","scrollTo","top","behavior","setInterval","Element","scrollTop","clearInterval","next","Math","floor","handleScroll","scrollY","server","isServer","visible","onMounted","addEventListener","onBeforeUnmount","removeEventListener","useTranslation"],"sources":["../../../../../src/components/va-backtop/VaBacktop.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    role=\"button\"\n    :aria-label=\"tp($props.ariaLabel)\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop\"\n    @keydown.enter.stop=\"scrollToTop\"\n  >\n    <slot>\n      <va-button\n        aria-hidden=\"true\"\n        icon=\"va-arrow-up\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount } from 'vue'\nimport { useComponentPresetProp, useTranslation } from '../../composables'\nimport { VaButton } from '../va-button'\nimport { isServer } from '../../utils/ssr'\nimport { warn } from '../../utils/console'\n\nexport default defineComponent({\n  name: 'VaBacktop',\n  components: { VaButton },\n  props: {\n    ...useComponentPresetProp,\n    target: {\n      type: [Object, String] as PropType<Element | string | undefined>,\n      default: undefined,\n    },\n    visibilityHeight: { type: Number, default: 300 },\n    speed: { type: Number, default: 50 },\n    verticalOffset: { type: String, default: '1rem' },\n    horizontalOffset: { type: String, default: '1rem' },\n    color: { type: String, default: '' },\n    horizontalPosition: {\n      type: String as PropType<'right' | 'left'>,\n      default: 'right',\n      validator: (value: string) => ['right', 'left'].includes(value),\n    },\n    verticalPosition: {\n      type: String as PropType<'bottom' | 'top'>,\n      default: 'bottom',\n      validator: (value: string) => ['bottom', 'top'].includes(value),\n    },\n    ariaLabel: { type: String, default: '$t:backToTop' },\n  },\n  setup (props) {\n    const targetScrollValue = ref(0)\n\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset,\n    }))\n\n    let targetElement: Element | Window\n\n    const getTargetElement = (): Element | Window => {\n      if (!props.target) {\n        return window\n      }\n      if (typeof props.target === 'string') {\n        const target = document.querySelector(props.target) as Element\n        if (!target) {\n          warn(`Target element [${props.target}] is not found, falling back to window.`)\n          return window\n        }\n        return target\n      }\n      return props.target as Element\n    }\n\n    const scrolled = ref(false)\n    const interval = ref(0)\n    const scrollToTop = () => {\n      if (scrolled.value) { return }\n\n      scrolled.value = true\n\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        })\n\n        return\n      }\n\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value)\n            scrolled.value = false\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed)\n            targetElement.scrollTo(0, next)\n          }\n        }\n      }, 15)\n    }\n\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window\n        ? targetElement.scrollY\n        : targetElement.scrollTop\n    }\n\n    const server = isServer()\n\n    const visible = computed(() => {\n      if (server) {\n        return false\n      }\n      return targetScrollValue.value > props.visibilityHeight\n    })\n\n    if (!server) {\n      onMounted(() => {\n        targetElement = getTargetElement()\n        targetElement.addEventListener('scroll', handleScroll, true)\n      })\n      onBeforeUnmount(() => targetElement?.removeEventListener('scroll', handleScroll))\n    }\n\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n      ...useTranslation(),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n  font-family: var(--va-font-family);\n}\n</style>\n"],"mappings":";;;;;;AA2BA,MAAAA,SAAA,GAAeC,eAAA,CAAgB;EAC7BC,IAAA,EAAM;EACNC,UAAA,EAAY;IAAEC;EAAS;EACvBC,KAAA,EAAO;IACL,GAAGC,sBAAA;IACHC,MAAA,EAAQ;MACNC,IAAA,EAAM,CAACC,MAAA,EAAQC,MAAM;MACrBC,OAAA,EAAS;IACX;IACAC,gBAAA,EAAkB;MAAEJ,IAAA,EAAMK,MAAA;MAAQF,OAAA,EAAS;IAAI;IAC/CG,KAAA,EAAO;MAAEN,IAAA,EAAMK,MAAA;MAAQF,OAAA,EAAS;IAAG;IACnCI,cAAA,EAAgB;MAAEP,IAAA,EAAME,MAAA;MAAQC,OAAA,EAAS;IAAO;IAChDK,gBAAA,EAAkB;MAAER,IAAA,EAAME,MAAA;MAAQC,OAAA,EAAS;IAAO;IAClDM,KAAA,EAAO;MAAET,IAAA,EAAME,MAAA;MAAQC,OAAA,EAAS;IAAG;IACnCO,kBAAA,EAAoB;MAClBV,IAAA,EAAME,MAAA;MACNC,OAAA,EAAS;MACTQ,SAAA,EAAYC,KAAA,IAAkB,CAAC,SAAS,MAAM,EAAEC,QAAA,CAASD,KAAK;IAChE;IACAE,gBAAA,EAAkB;MAChBd,IAAA,EAAME,MAAA;MACNC,OAAA,EAAS;MACTQ,SAAA,EAAYC,KAAA,IAAkB,CAAC,UAAU,KAAK,EAAEC,QAAA,CAASD,KAAK;IAChE;IACAG,SAAA,EAAW;MAAEf,IAAA,EAAME,MAAA;MAAQC,OAAA,EAAS;IAAe;EACrD;EACAa,MAAOnB,KAAA,EAAO;IACN,MAAAoB,iBAAA,GAAoBC,GAAA,CAAI,CAAC;IAEzB,MAAAC,aAAA,GAAgBC,QAAA,CAAS,OAAO;MACpC,CAACvB,KAAA,CAAMiB,gBAAgB,GAAGjB,KAAA,CAAMU,cAAA;MAChC,CAACV,KAAA,CAAMa,kBAAkB,GAAGb,KAAA,CAAMW;IAClC;IAEE,IAAAa,aAAA;IAEJ,MAAMC,gBAAA,GAAmBA,CAAA,KAAwB;MAC3C,KAACzB,KAAA,CAAME,MAAA,EAAQ;QACV,OAAAwB,MAAA;MACT;MACI,WAAO1B,KAAA,CAAME,MAAA,KAAW,UAAU;QACpC,MAAMA,MAAA,GAASyB,QAAA,CAASC,aAAA,CAAc5B,KAAA,CAAME,MAAM;QAClD,IAAI,CAACA,MAAA,EAAQ;UACN2B,IAAA,oBAAmB7B,KAAA,CAAME,MAAA,yCAA+C;UACtE,OAAAwB,MAAA;QACT;QACO,OAAAxB,MAAA;MACT;MACA,OAAOF,KAAA,CAAME,MAAA;IAAA;IAGT,MAAA4B,QAAA,GAAWT,GAAA,CAAI,KAAK;IACpB,MAAAU,QAAA,GAAWV,GAAA,CAAI,CAAC;IACtB,MAAMW,WAAA,GAAcA,CAAA,KAAM;MACxB,IAAIF,QAAA,CAASf,KAAA,EAAO;QAAE;MAAO;MAE7Be,QAAA,CAASf,KAAA,GAAQ;MAEjB,IAAIS,aAAA,YAAyBS,MAAA,EAAQ;QACnCP,MAAA,CAAOQ,QAAA,CAAS;UACdC,GAAA,EAAK;UACLC,QAAA,EAAU;QAAA,CACX;QAED;MACF;MAESL,QAAA,CAAAhB,KAAA,GAAQW,MAAA,CAAOW,WAAA,CAAY,MAAM;QACxC,IAAIb,aAAA,YAAyBc,OAAA,EAAS;UAChC,IAAAd,aAAA,CAAce,SAAA,KAAc,GAAG;YACjCC,aAAA,CAAcT,QAAA,CAAShB,KAAK;YAC5Be,QAAA,CAASf,KAAA,GAAQ;UAAA,OACZ;YACL,MAAM0B,IAAA,GAAOC,IAAA,CAAKC,KAAA,CAAMnB,aAAA,CAAce,SAAA,GAAYvC,KAAA,CAAMS,KAAK;YAC/Ce,aAAA,CAAAU,QAAA,CAAS,GAAGO,IAAI;UAChC;QACF;MAAA,GACC,EAAE;IAAA;IAGP,MAAMG,YAAA,GAAeA,CAAA,KAAM;MACzBxB,iBAAA,CAAkBL,KAAA,GAAQS,aAAA,YAAyBS,MAAA,GAC/CT,aAAA,CAAcqB,OAAA,GACdrB,aAAA,CAAce,SAAA;IAAA;IAGpB,MAAMO,MAAA,GAASC,QAAA;IAET,MAAAC,OAAA,GAAUzB,QAAA,CAAS,MAAM;MAC7B,IAAIuB,MAAA,EAAQ;QACH;MACT;MACO,OAAA1B,iBAAA,CAAkBL,KAAA,GAAQf,KAAA,CAAMO,gBAAA;IAAA,CACxC;IAED,IAAI,CAACuC,MAAA,EAAQ;MACXG,SAAA,CAAU,MAAM;QACdzB,aAAA,GAAgBC,gBAAA,CAAiB;QACnBD,aAAA,CAAA0B,gBAAA,CAAiB,UAAUN,YAAA,EAAc,IAAI;MAAA,CAC5D;MACDO,eAAA,CAAgB,MAAM3B,aAAA,oBAAAA,aAAA,CAAe4B,mBAAA,CAAoB,UAAUR,YAAA,CAAa;IAClF;IAEO;MACLtB,aAAA;MACA0B,OAAA;MACAhB,WAAA;MACA,GAAGqB,cAAA,CAAe;IAAA;EAEtB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}