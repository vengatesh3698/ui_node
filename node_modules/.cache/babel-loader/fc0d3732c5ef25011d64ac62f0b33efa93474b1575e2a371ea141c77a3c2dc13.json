{"ast":null,"code":"import { computed, watch } from \"vue\";\nimport { u as useThrottleProps, a as useThrottleValue } from \"../../../composables/useThrottle-cdbdff3a.mjs\";\nconst useFilterableProps = {\n  ...useThrottleProps,\n  filter: {\n    type: String,\n    default: \"\"\n  },\n  filterMethod: {\n    type: Function\n  }\n};\nconst useFilterable = (rawRows, props, emit) => {\n  const filteredRows = computed(() => {\n    if (!rawRows.value.length) {\n      return rawRows.value;\n    }\n    if (props.filter === \"\" && !props.filterMethod) {\n      return rawRows.value;\n    }\n    return rawRows.value.filter(row => row.cells.some(cell => {\n      return typeof props.filterMethod === \"function\" ? props.filterMethod(cell.source) : cell.value.toLowerCase().includes(props.filter.toLowerCase());\n    }));\n  });\n  const filteredRowsThrottled = useThrottleValue(filteredRows, props);\n  watch(filteredRowsThrottled, () => {\n    emit(\"filtered\", {\n      items: filteredRowsThrottled.value.map(row => row.source),\n      itemsIndexes: filteredRowsThrottled.value.map(row => row.initialIndex)\n    });\n  });\n  return {\n    filteredRows: filteredRowsThrottled\n  };\n};\nexport { useFilterable as a, useFilterableProps as u };","map":{"version":3,"names":["useFilterableProps","useThrottleProps","filter","type","String","default","filterMethod","Function","useFilterable","rawRows","props","emit","filteredRows","computed","value","length","row","cells","some","cell","source","toLowerCase","includes","filteredRowsThrottled","useThrottleValue","watch","items","map","itemsIndexes","initialIndex"],"sources":["../../../../../../src/components/va-data-table/hooks/useFilterable.ts"],"sourcesContent":["import { Ref, watch, computed, PropType, ExtractPropTypes } from 'vue'\n\nimport { useThrottleValue, useThrottleProps } from '../../../composables'\n\nimport type { DataTableRow, DataTableFilterMethod, DataTableItem } from '../types'\n\nexport const useFilterableProps = {\n  ...useThrottleProps,\n  filter: { type: String, default: '' },\n  filterMethod: { type: Function as PropType<DataTableFilterMethod | undefined> },\n}\n\nexport type TFilteredArgs = { items: DataTableItem[], itemsIndexes: number[] }\nexport type TFilterableEmits = (event: 'filtered', arg: TFilteredArgs) => void\n\nexport const useFilterable = (\n  rawRows: Ref<DataTableRow[]>,\n  props: ExtractPropTypes<typeof useFilterableProps>,\n  emit: TFilterableEmits,\n) => {\n  const filteredRows = computed<DataTableRow[]>(() => {\n    if (!rawRows.value.length) {\n      return rawRows.value\n    }\n\n    if (props.filter === '' && !props.filterMethod) {\n      return rawRows.value\n    }\n\n    return rawRows.value.filter(row => row.cells.some(cell => {\n      return typeof props.filterMethod === 'function'\n        ? props.filterMethod(cell.source)\n        : cell.value.toLowerCase().includes(props.filter.toLowerCase())\n    }))\n  })\n\n  const filteredRowsThrottled = useThrottleValue(filteredRows, props)\n\n  watch(filteredRowsThrottled, () => {\n    emit('filtered', {\n      items: filteredRowsThrottled.value.map(row => row.source),\n      itemsIndexes: filteredRowsThrottled.value.map(row => row.initialIndex),\n    })\n  })\n\n  return {\n    filteredRows: filteredRowsThrottled,\n  }\n}\n"],"mappings":";;AAMO,MAAMA,kBAAA,GAAqB;EAChC,GAAGC,gBAAA;EACHC,MAAA,EAAQ;IAAEC,IAAA,EAAMC,MAAA;IAAQC,OAAA,EAAS;EAAG;EACpCC,YAAA,EAAc;IAAEH,IAAA,EAAMI;EAAwD;AAChF;AAKO,MAAMC,aAAA,GAAgBA,CAC3BC,OAAA,EACAC,KAAA,EACAC,IAAA,KACG;EACG,MAAAC,YAAA,GAAeC,QAAA,CAAyB,MAAM;IAC9C,KAACJ,OAAA,CAAQK,KAAA,CAAMC,MAAA,EAAQ;MACzB,OAAON,OAAA,CAAQK,KAAA;IACjB;IAEA,IAAIJ,KAAA,CAAMR,MAAA,KAAW,MAAM,CAACQ,KAAA,CAAMJ,YAAA,EAAc;MAC9C,OAAOG,OAAA,CAAQK,KAAA;IACjB;IAEA,OAAOL,OAAA,CAAQK,KAAA,CAAMZ,MAAA,CAAOc,GAAA,IAAOA,GAAA,CAAIC,KAAA,CAAMC,IAAA,CAAaC,IAAA;MACxD,OAAO,OAAOT,KAAA,CAAMJ,YAAA,KAAiB,aACjCI,KAAA,CAAMJ,YAAA,CAAaa,IAAA,CAAKC,MAAM,IAC9BD,IAAA,CAAKL,KAAA,CAAMO,WAAA,GAAcC,QAAA,CAASZ,KAAA,CAAMR,MAAA,CAAOmB,WAAA,EAAa;IACjE,EAAC;EAAA,CACH;EAEK,MAAAE,qBAAA,GAAwBC,gBAAA,CAAiBZ,YAAA,EAAcF,KAAK;EAElEe,KAAA,CAAMF,qBAAA,EAAuB,MAAM;IACjCZ,IAAA,CAAK,YAAY;MACfe,KAAA,EAAOH,qBAAA,CAAsBT,KAAA,CAAMa,GAAA,CAAIX,GAAA,IAAOA,GAAA,CAAII,MAAM;MACxDQ,YAAA,EAAcL,qBAAA,CAAsBT,KAAA,CAAMa,GAAA,CAAIX,GAAA,IAAOA,GAAA,CAAIa,YAAY;IAAA,CACtE;EAAA,CACF;EAEM;IACLjB,YAAA,EAAcW;EAAA;AAElB"},"metadata":{},"sourceType":"module","externalDependencies":[]}